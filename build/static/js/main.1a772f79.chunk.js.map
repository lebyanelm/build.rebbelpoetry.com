{"version":3,"sources":["pages/PoemPage/PoemPage.module.scss","pages/PoetProfile/PoetProfile.module.scss","logo.svg","providers/SessionContext.js","providers/BacklightContext.js","components/AccountDropdownOptions/AccountDropdownOptions.js","components/Header/Header.js","components/PoemPostInput/PoemPostInput.js","config.js","services/Poem.js","components/Poem/Poem.js","components/PoemsList/PoemsList.js","services/Storage.js","providers/StorageContext.js","components/Loader/Loader.js","providers/LoaderContext.js","components/Toast/Toast.js","providers/ToastContext.js","pages/HomePage/HomePage.js","pages/NotFoundPage/NotFoundPage.js","components/Poet/Poet.js","pages/PoetsPage/PoetsPage.js","components/PreviewAvatar/PreviewAvatar.js","components/PoemShareContents/PoemShareContents.js","pages/PoetProfile/PoetProfile.js","components/PoemPageHeader/PoemPageHeader.js","services/Comments.js","components/Comment/Comment.js","components/CommentsSection/CommentsSection.js","pages/PoemPage/PoemPage.js","pages/SearchPage/SearchPage.js","components/Footer/Footer.js","pages/SignUpPage/SignUpPage.js","pages/SignInPage/SignInPage.js","pages/DraftsPage/DraftsPage.js","pages/FeelingLuckyPage/FeelingLuckyPage.js","components/RootWrapper/RootWrapper.js","components/DraftPreview/DraftPreview.js","pages/NewPoem/NewPoem.js","App.js","reportWebVitals.js","index.js","components/Footer/Footer.module.scss","components/PoemPageHeader/PoemPageHeader.module.scss","components/Poem/Poem.module.scss","pages/NewPoem/NewPoem.module.scss","components/Comment/Comment.module.scss","components/DraftPreview/DraftPreview.module.scss","components/AccountDropdownOptions/AccountDropdownOptions.module.scss","components/PoemPostInput/PoemPostInput.module.scss","components/Header/Header.module.css","pages/SearchPage/SearchPage.module.scss","components/Loader/Loader.module.scss","components/Poet/Poet.module.scss","components/PoemShareContents/PoemShareContents.module.scss","components/Toast/Toast.module.scss","components/PreviewAvatar/PreviewAvatar.module.scss","components/CommentsSection/CommentsSection.module.scss","components/PoemsList/PoemsList.module.scss","pages/NotFoundPage/NotFoundPage.module.scss","pages/PoetsPage/PoetsPage.module.scss"],"names":["module","exports","SessionContext","React","createContext","SessionContextProvider","children","useState","userSession","setUserSession","Provider","value","useSession","useContext","BacklightContext","BacklightContextProvider","state","handler","isBacklightVisible","setIsBacklightVisible","className","style","display","onClick","AccountDropdownOptions","location","isOptionsOpen","setIsOptionsOpen","history","useHistory","toggleOptions","pathname","join","styles","HeaderSectionName","marginRight","backgroundImage","display_photo","RebbelName","display_name","RebbelStatus","marginLeft","transform","name","DropdownItemsHeader","to","username","DropdownLinkItems","href","SignOut","localStorage","removeItem","push","defaultProps","Header","useLocation","HeaderContainer","target","rel","Banner","HeaderBrandLogo","src","Logo","alt","class","NavigationLinks","includes","Component","config","APP_NAME","ENV","BACKEND","FRONTEND","PoemService","getPoemData","pId","Promise","resolve","reject","superagent","end","_","response","respond","getPoemAuthors","authorIds","getUnauthenticatedFeed","updateDraft","data","token","send","set","updatePoem","likePoem","console","log","bookmarkPoem","deletePoem","getDraft","did","getTags","tagIds","userId","uploadThumbnail","file","progressUpdate","on","event","percent","attach","publish","tags","split","is_anonymous","statusCode","body","reason","Poem","isDraft","poemAuthors","setPoemAuthors","useEffect","undefined","author","featured_poets","then","poets","thumbnail","PoemThumbnail","process","REACT_APP_API_ENDPOINT","PoemReadTime","read_time","PoemDetails","gap","PoemAvatarDetails","PoemDetailsContainer","PoemTitle","_id","toUpperCase","title","PoemAuthorTime","flex","alignItems","likes_count","views_count","PoemsList","feed","isDrafts","PoemsGrid","map","poem","Storage","constructor","String","Array","Object","JSON","stringify","toString","setItem","error","StorageContext","StorageContextProvider","getItem","userToken","setUserToken","useStorage","Loader","width","height","viewBox","fill","xmlns","FirstCircle","d","BlendGroup","SecondCircle","x","rx","LoaderContext","LoaderContextProvider","isLoaderVisible","setIsLoaderVisible","useLoaderState","Toast","text","isShowClose","closeToast","CloseButton","ToastContext","ToastContextProvider","toastText","setToastText","setIsShowClose","showToast","duration","setTimeout","useToast","HomePage","setFeed","document","poems","Fragment","margin","paddingTop","NotFoundPage","id","x1","y1","x2","y2","gradientUnits","offset","Poet","poet","PoetAvatar","PoetName","PoetsPage","rebbels","setRebbels","pages","setPages","router","defaultParams","qs","parse","search","ignoreQueryPrefix","queryParameters","setQueryParameters","responseError","setResponseError","getRebbelPoets","useCallback","index","updatePagesCount","total_count","totalCount","pIndexes","pIndex","Poets","textAlign","fontSize","color","userSelect","length","pageNumber","PreviewAvatar","PreviewDisplayName","PoemShareContents","pTitle","shareLink","ShareLinkInput","type","disabled","navigator","clipboard","writeText","SocialMediaShare","shareText","PoetProfile","params","useParams","profileData","setProfileData","isShareModalOpen","_setShareModal","setShareText","setShareLink","setShareModal","link","isAvatarPreviewOpen","setIsAvatarPreviewOpen","getProfileData","replaceProfileAvatar","avatar_url","email_address","status","toggleAvatarPreview","forEach","poemId","isOpen","onRequestClose","overlay","zIndex","content","padding","position","bottom","borderRadius","border","ProfilePage","ProfileAvatarContainer","ProfileAvatar","i","createElement","accept","click","addEventListener","e","files","large","selectUploadPhoto","PageContents","ProfileName","Name","ProfleVerificationSign","ProfileBiography","biography","ProfileBiographyEditButton","ProfileHeaderButtons","FollowButton","backgroundColor","follows","positon","opacity","ProfileStats","followers","PoemPageHeader","poemData","BackgroundDiffuser","PoemInformationContainer","PoemThumbnailImage","PlayPauseButton","PoemAuthor","PoemMetadataItems","time_created","day","PoemStats","CommentsService","comment","getComments","react","cId","update","delete","Comment","storage","isEditMode","setEditMode","commenter","setCommenter","editPoemTextarea","createRef","commenters","CommentActions","CommentLikesCount","CommentActionButtons","Like","likes","is_like","splice","indexOf","CommentBody","rows","placeholder","defaultValue","ref","CommentorNameDate","time","CommentMoreActions","current","CommentsSection","commentTextareaRef","comments","setComments","catch","reference","cIndex","findIndex","c","_comments","PostCommentField","PoemPage","setIsEditMode","editableTextContentRef","poemTextContainer","useRef","scrollButtonsContainer","annotationPosition","setAnnotationPosition","annotationContainer","annotoationText","setAnnotationText","activeIndex","setActiveIndex","poemTags","setPoemTags","setPoemData","classList","add","window","scrollY","poemContent","poemContentRect","getBoundingClientRect","y","top","PoemPageContainer","PoemContents","PoemSplitSides","SideButtons","Heart","Bookmark","bookmarked_poems","bookmarks_count","is_bookmark","bookmarkedPoems","bookmarkedPoemIndex","Share","PoemTextContainer","PoemActions","innerText","onKeyUp","contentEditable","borderBottom","paddingBottom","whiteSpace","splitText","result","splitAnnotations","_text","annotation","targetRect","textContainerRect","targetPosition","annotationContainerRect","annotationTotalSpace","positionAnnotationContainer","parseAnnotations","AnnotationsContainer","translate","plugins","remarkGfm","linkTarget","PoemTags","tag","toLowerCase","CommentsSectionHeader","Count","commentIds","SearchPage","searchValue","setSearchValue","results","setResults","getSearchResults","optionalKeyword","keyword","PageTitle","SearchInputContainer","LargeSearchInput","SearchButton","authors","Rebbels","rebbel","Footer","FooterContainer","LeftSection","BrandName","Legal","FirstMiddleSection","SectionName","SecondMiddleSection","Attribution","Date","getFullYear","SignUpPage","password","requestData","setRequestData","onInputKeyup","onSubmit","preventDefault","ResponseError","SignInPage","signInData","setSignInData","action","credentialsData","btoa","DraftsPage","drafts","setDrafts","FeelingLuckyPage","isError","setIsError","marginBottom","RootWrapper","DraftPreview","isPublished","setDraftPreviewContainer","tagsInput","annotationText","draftContainer","getElementById","innerWidth","onScroll","DraftTitle","DraftSplitSides","DraftContents","DraftAnnotationsText","DraftAnnotations","BottomButtons","NewPoem","isPreviewOpen","setIsPreviewOpen","uploadProgress","setUploadProgress","toISOString","is_created","draftData","setDraftData","titleInputRef","nanoid","draft_id","draft","onFieldChange","ev","changes","scrollHeight","imageInputRef","PageContainer","NewPoemHeaderContainer","NewPoemImageContainer","onChange","hidden","NewPoemImageSelector","ImageUploadProgress","NewPoemDetails","NewPoemTitle","autoFocus","referrerPolicy","NewPoemContentsContainer","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1a772f79.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemPageContainer\":\"PoemPage_PoemPageContainer__1CarM\",\"PoemContents\":\"PoemPage_PoemContents__371ti\",\"PoemSplitSides\":\"PoemPage_PoemSplitSides__3WBGw\",\"PoemTextContainer\":\"PoemPage_PoemTextContainer__1JETF\",\"is-guide\":\"PoemPage_is-guide__1x6C7\",\"AnnotationsContainer\":\"PoemPage_AnnotationsContainer__Fzloh\",\"SideButtons\":\"PoemPage_SideButtons__ugz1G\",\"Eye\":\"PoemPage_Eye__3WqdT\",\"Heart\":\"PoemPage_Heart__CcMDg\",\"Bookmark\":\"PoemPage_Bookmark__2Sv34\",\"PoemInformation\":\"PoemPage_PoemInformation__dnvQ3\",\"PoemTags\":\"PoemPage_PoemTags__dFrKg\",\"PoemActions\":\"PoemPage_PoemActions__3AxBr\",\"CommentsSection\":\"PoemPage_CommentsSection__3FB5Z\",\"CommentsSectionHeader\":\"PoemPage_CommentsSectionHeader__3L4d2\",\"Name\":\"PoemPage_Name__oRO03\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProfilePage\":\"PoetProfile_ProfilePage__3EHfO\",\"PageContents\":\"PoetProfile_PageContents__r-u8b\",\"ProfileAvatar\":\"PoetProfile_ProfileAvatar__2wH_s\",\"ProfileName\":\"PoetProfile_ProfileName__pBmrO\",\"Name\":\"PoetProfile_Name__3iNLf\",\"ProfileBiography\":\"PoetProfile_ProfileBiography__2A4pG\",\"ProfileHeaderButtons\":\"PoetProfile_ProfileHeaderButtons__dhG6E\",\"ProfileStats\":\"PoetProfile_ProfileStats__3S3gE\",\"PoetProfileContents\":\"PoetProfile_PoetProfileContents__J1aos\",\"FollowButton\":\"PoetProfile_FollowButton__BT_KL\"};","export default __webpack_public_path__ + \"static/media/logo.6597611f.svg\";","import React from \"react\";\n\n// Session Context\nconst SessionContext = React.createContext({});\n\n// Session Context Provider\nconst SessionContextProvider = ({ children }) => {\n  const [userSession, setUserSession] = React.useState();\n\n  return (\n    <SessionContext.Provider value={{ userSession, setUserSession }}>\n      {children}\n    </SessionContext.Provider>\n  );\n};\n\n// Session Context Consumer\nconst useSession = () => {\n  const context = React.useContext(SessionContext);\n  return context;\n};\n\nexport { SessionContextProvider, useSession, SessionContext };\n","import React from \"react\";\n\n// Session Context\nconst BacklightContext = React.createContext({});\n\n// Session Context Provider\nconst BacklightContextProvider = ({ children }) => {\n  const [isBacklightVisible, setIsBacklightVisible] = React.useState({\n    state: false,\n    handler: () => null,\n  });\n\n  return (\n    <>\n      <div\n        className=\"backlight\"\n        style={{ display: isBacklightVisible.state ? \"block\" : \"none\" }}\n        onClick={() => {\n          setIsBacklightVisible({ state: false, handler: () => null });\n          isBacklightVisible.handler();\n        }}\n      ></div>\n      <BacklightContext.Provider\n        value={{ isBacklightVisible, setIsBacklightVisible }}\n      >\n        {children}\n      </BacklightContext.Provider>\n    </>\n  );\n};\n\n// Session Context Consumer\nconst useBacklight = () => {\n  const context = React.useContext(BacklightContext);\n  return context;\n};\n\nexport { BacklightContextProvider, useBacklight, BacklightContext };\n","import React from \"react\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useBacklight } from \"../../providers/BacklightContext\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport styles from \"./AccountDropdownOptions.module.scss\";\n\nconst AccountDropdownOptions = ({ userSession, location }) => {\n  const [isOptionsOpen, setIsOptionsOpen] = React.useState(false);\n  const { setIsBacklightVisible } = useBacklight();\n\n  const { setUserSession } = useSession();\n\n  const history = useHistory();\n\n  const showOptions = () => setIsOptionsOpen(true);\n  const hideOptions = () => setIsOptionsOpen(false);\n  const toggleOptions = () => {\n    if (isOptionsOpen) hideOptions();\n    else showOptions();\n    setIsBacklightVisible({\n      state: !isOptionsOpen,\n      handler: () => {\n        setIsOptionsOpen(false);\n      },\n    });\n  };\n\n  return (\n    <>\n      <div className=\"dropdown-options-backlight\"></div>\n      <div className=\"clickable\">\n        <div\n          className={[\n            \"navigation-item dropdown flex\",\n            location.pathname === \"/sign_in\" || location.pathname === \"/sign_up\"\n              ? \"active\"\n              : \"inactive\",\n          ].join(\" \")}\n        >\n          <section onClick={() => toggleOptions()} className={styles.HeaderSectionName}>\n            <div\n              className=\"avatar small-avatar\"\n              style={{\n                marginRight: \"5px\",\n                backgroundImage: `url(${userSession.display_photo})`,\n              }}\n            ></div>\n            <span className={styles.RebbelName}>{userSession?.display_name} <span className={styles.RebbelStatus} data-belt=\"\"></span></span>\n            <IonIcon\n              style={{ marginLeft: \"5px\", transform: \"translateY(0px)\" }}\n              name=\"chevron-down\"\n            ></IonIcon>\n          </section>\n\n          <div\n            className=\"dropdown-options\"\n            style={{ display: isOptionsOpen ? \"block\" : \"none\" }}\n          >\n            <section className={styles.DropdownItemsHeader}>\n              <span to=\"/poet/me\">\n                Signed in as{\" \"}\n                <b>\n                  {userSession?.display_name} (@{userSession?.username})\n                </b>\n              </span>\n            </section>\n            <section className={styles.DropdownLinkItems}>\n              <a href={[\"/rebbels/@\", userSession?.username].join(\"\")}>\n                Your Profile\n              </a>\n              <a href=\"/collaborations\">Your Collaborations and Features</a>\n              <a href=\"/your_drafts\">Your Unpublished Drafts</a>\n            </section>\n            <section className={styles.DropdownLinkItems}>\n              <Link className=\"\" to=\"/edit_profile\">\n                Edit your profile\n              </Link>\n              <Link className={styles.SignOut} onClick={() => {\n                // Set the session to be null and log the user out\n                setUserSession(null);\n                // Also remove the local storage data session token\n                localStorage.removeItem(\"AUTH_TOKEN\");\n                // Route the user to a sign in page\n                history.push(\"/sign_in\");\n              }}>\n                Sign out\n              </Link>\n            </section>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nAccountDropdownOptions.propTypes = {};\n\nAccountDropdownOptions.defaultProps = {};\n\nexport default AccountDropdownOptions;\n","import React from \"react\";\nimport Logo from \"../../logo.svg\";\nimport styles from \"./Header.module.css\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport AccountDropdownOptions from \"../AccountDropdownOptions/AccountDropdownOptions\";\n\nconst Header = () => {\n  const location = useLocation();\n  const { userSession } = useSession();\n\n  return (\n    <div className={styles.HeaderContainer}>\n      {/* BANNER */}\n      <a\n        href=\"https://patreon.com/@rebbelpoetry\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className={styles.Banner}\n      >\n        We need your support to keep the site functional and available &mdash;\n        Become a contributor\n        <IonIcon name=\"arrow-forward\"></IonIcon>\n      </a>\n\n      {/* HEADER CONTENTS */}\n      <div className={styles.Header}>\n        <Link to=\"/\" className={styles.HeaderBrandLogo}>\n          <img src={Logo} alt=\"\" />\n        </Link>\n        <section class={styles.NavigationLinks}>\n          {userSession && (\n            <Link to=\"/new_poem\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/new_poem\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Publish New\n              </div>\n            </Link>\n          )}\n          <Link to=\"/discover\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/discover\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Discover\n            </div>\n          </Link>\n          <Link to=\"/rebbels\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname.includes(\"/rebbels\") ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Rebbel Poets\n            </div>\n          </Link>\n\n          {/* Only when there's a session */}\n          {userSession && (\n            <Link to=\"/your_drafts\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/your_drafts\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Your Drafts\n              </div>\n            </Link>\n          )}\n\n          <Link to=\"/feeling_lucky\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/feeling_lucky\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Feeling Lucky\n            </div>\n          </Link>\n          <Link to=\"/search\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/search\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Search\n            </div>\n          </Link>\n        </section>\n\n        <div className=\"flex-space\"></div>\n\n        <section>\n          {!userSession && (\n            <Link to=\"/sign_up\">\n              <div className=\"navigation-item button\">Become a Rebbel</div>\n            </Link>\n          )}\n\n          {/* For members this will be shown */}\n          {userSession && (\n            <AccountDropdownOptions\n              userSession={userSession}\n              location={location}\n            ></AccountDropdownOptions>\n          )}\n\n          {/* For non-logged in members */}\n          {!userSession && (\n            <Link to=\"/sign_in\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/sign_in\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Sign In\n              </div>\n            </Link>\n          )}\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport styles from \"./PoemPostInput.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { BeatLoader } from \"react-spinners\";\n\nclass PoemPostInput extends Component {\n  state = {\n    isAnonymousPublish: false,\n  };\n\n  toggleIdentity = () => {\n    this.setState({ isAnonymousPublish: !this.state.isAnonymousPublish });\n  };\n\n  render() {\n    return (\n      <div className={styles.PoemInputContainer}>\n        <input\n          className={styles.PoemInputTitle}\n          placeholder=\"Type a poem title here...\"\n        />\n        <textarea\n          className={styles.PoemInput}\n          placeholder=\"Craft your poem in this space, resize height if needed.\"\n        ></textarea>\n\n        <br />\n        <br />\n        <input\n          type=\"text\"\n          className={styles.PoemTagsInput}\n          placeholder=\"Type comma-separated tags of the poem (Optional)\"\n        />\n\n        <div className={styles.Buttons}>\n          <section>\n            <button className=\"outline\">\n              <span>Attach Thumbnail</span>\n            </button>\n\n            <button>\n              <span>Feature a Poet</span>\n            </button>\n\n            <button>\n              <span>Preview & Publish</span>\n            </button>\n          </section>\n          <section>\n            <a\n              className={styles.PostingAuthority}\n              onClick={this.toggleIdentity}\n            >\n              {this.state.isAnonymousPublish ? \"Anonymous\" : \"Libby Lebyane\"}\n            </a>\n            &mdash;\n            {/* When the user updates the poem draft */}\n            <BeatLoader></BeatLoader>\n            <span className={styles.SyncingStatus}>\n              Syncing to draft (<a>Delete</a>)\n            </span>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PoemPostInput;\n","// Environment for development values\nconst developmnent = {\n  ENV: \"development\",\n  BACKEND: \"http://localhost:5000/api\",\n  FRONTEND: \"https://rebbelpoetry.com\",\n};\n\n// Environment for production values\nconst production = {\n  ENV: \"production\",\n  BACKEND: \"https://apis.rebbelpoetry.com/api\",\n  FRONTEND: \"https://rebbelpoetry.com\",\n};\n\n// Environment for all values - doesn't depend on any environment it's always there\nconst config = {\n  APP_NAME: \"Rebbel Poetry\",\n  ...(process.env.NODE_ENV === \"development\" ? developmnent : production),\n};\n\nexport default config;\n","import * as superagent from \"superagent\";\nimport config from \"../config\";\n\nexport const PoemService = {\n  // Gets poem data from the backend\n  getPoemData: (pId) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([config.BACKEND, \"poems\", pId].join(\"/\"))\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  // Get the details of a poet\n  getPoemAuthors: (authorIds) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([config.BACKEND, \"authors\", authorIds].join(\"/\"))\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  // Gets a list of poems suggested for as a feed\n  getUnauthenticatedFeed: () => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([config.BACKEND, \"poems\", \"feed\"].join(\"/\"))\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  updateDraft: (data, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"drafts\"].join(\"/\"))\n        .send({ ...data })\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  updatePoem: (data, pId, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .patch([config.BACKEND, \"poems\", pId].join(\"/\"))\n        .send(data)\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  likePoem: (pId, token) => {\n    console.log(pId, token);\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"poems\", pId, \"react\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          // Response will bring back a number of likes that are synced with the server.\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  bookmarkPoem: (pId, token) => {\n    console.log(pId, token);\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"poems\", \"bookmark\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .send({ pId })\n        .end((_, response) => {\n          // Response returns synced bookmarks numbers of the poem\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  deletePoem: (pId, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .delete([config.BACKEND, \"poems\", pId].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  getDraft: (did, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([config.BACKEND, \"drafts\", did].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  getTags: (tagIds, userId) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([config.BACKEND, \"tags\", tagIds.join()].join(\"/\"))\n        .set(\"User-Track\", userId)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  uploadThumbnail: (file, token, progressUpdate) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .put([config.BACKEND, \"assets\", \"upload\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .on(\"progress\", (event) => {\n          if (progressUpdate) progressUpdate(event.percent);\n        })\n        .attach(\"file\", file)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  // Publishes a poem to the the community for reading\n  publish: (data, tags, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"publish\", data.did].join(\"/\"))\n        .set(\"Authorization\", token)\n        .send({ tags: tags.split(\",\"), is_anonymous: data.is_anonymous })\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  respond: (response, resolve, reject) => {\n    if (response)\n      if (response.statusCode === 200) resolve(response.body.data);\n      else reject(response.body.reason || \"Something went wrong.\");\n    else\n      reject(\n        \"No internet connection. Please connect your device and try again.\"\n      );\n  },\n};\n","import React from \"react\";\nimport styles from \"./Poem.module.scss\";\nimport { Link } from \"react-router-dom\";\nimport { PoemService } from \"../../services/Poem\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport IonIcon from \"@reacticons/ionicons\";\n\nconst Poem = ({ data, isDraft }) => {\n  const [poemAuthors, setPoemAuthors] = React.useState([]);\n  const reduceDescription = (description) => {\n    description = description.split(\" \");\n    if (description.length > 40) {\n      description = description.slice(0, 25);\n    }\n    return description.join(\" \") + \"...\";\n  };\n\n  React.useEffect(() => {\n    // Get information of the poet\n    if (data.author !== undefined) {\n      PoemService.getPoemAuthors([data.author, ...data.featured_poets]).then(\n        (poets) => {\n          console.log(poets)\n          setPoemAuthors(poets);\n        }\n      );\n    } else {\n      setPoemAuthors([\n        isDraft\n          ? { display_name: \"Myself\", username: \"me\" }\n          : { display_name: \"Anonymous\", username: \"anonymous\" },\n      ]);\n    }\n  }, []);\n\n  return (\n    <div className={styles.Poem}>\n      {data.thumbnail ? (\n        <div\n          className={styles.PoemThumbnail}\n          style={{ backgroundImage: `url(${data.thumbnail})` }}\n          data-text=\"Bookmarked and Liked\"\n        ></div>\n      ) : (\n        <div\n          className={styles.PoemThumbnail}\n          style={{\n            backgroundImage: `url(${[\n              process.env.REACT_APP_API_ENDPOINT,\n              \"uploads\",\n              \"default-background.png\",\n            ].join(\"/\")})`,\n          }}\n          data-text=\"Bookmarked and Liked\"\n        ></div>\n      )}\n      <div className={styles.PoemReadTime}>{data.read_time}</div>\n      <div className={styles.PoemDetails}>\n        <div style={{display: \"flex\", gap: \"10px\"}}>\n          <div className={styles.PoemAvatarDetails}>\n            <a href={[\"/rebbels/@\", poemAuthors[0]?.username].join(\"\")} className=\"avatar small-avatar\" style={{backgroundImage: `url(${poemAuthors[0]?.display_photo})`}}></a>\n          </div>\n          <div className={styles.PoemDetailsContainer}>\n            <a\n              className={styles.PoemTitle}\n              href={\n                isDraft\n                  ? [\"/new_poem?draft_id=\", data.did].join(\"\")\n                  : [\"/~\", data._id?.toUpperCase()].join(\"\")\n              }\n            >\n              {data.title}\n            </a>\n            <div className={styles.PoemAuthorTime}>\n              <a href={[\"/\"].join(\"\")}>{poemAuthors[0]?.display_name}</a>\n            </div>\n          </div>\n          <span style={{flex: \"2\"}}></span>\n          <div style={{display: \"flex\",  gap: \"10px\"}}>\n            <div style={{display: \"flex\", gap: \"5px\", alignItems: \"center\"}}>\n              <IonIcon name=\"hand-left\" />\n              <span>{data?.likes_count}</span>\n            </div>\n\n            <div style={{display: \"flex\", gap: \"5px\", alignItems: \"center\"}}>\n              <IonIcon name=\"eye\" />\n              <span>{data?.views_count}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Poem;\n\n// <div className={styles.}></div>\n","import Poem from '../Poem/Poem';\nimport styles from './PoemsList.module.scss';\n\nconst PoemsList = ({ feed, isDrafts }) => {\n  return (<div className={styles.PoemsGrid}>\n    {feed.map((poem) => <Poem data={poem} isDraft={isDrafts}></Poem>)}\n  </div>)\n};\n\nexport default PoemsList;\n","export const Storage = {\n  set: (name, data) => {\n    return new Promise((resolve, reject) => {\n      try {\n        if (data && data.constructor !== String) {\n          if (data.constructor === Array || data.constructor === Object) {\n            data = JSON.stringify(data, null, 2);\n          } else {\n            data = data.toString();\n          }\n        }\n        localStorage.setItem(name, data);\n        resolve([name, data]);\n      } catch (error) {\n        console.error(error);\n        reject(\"Something went wrong while saving data\");\n      }\n    });\n  },\n\n  get: (name, isJSON = false) => {\n    return new Promise((resolve, reject) => {\n      try {\n        const data = localStorage.getItem(name);\n        if (isJSON) {\n          resolve(JSON.parse(data));\n        } else {\n          resolve(data);\n        }\n      } catch (error) {\n        console.error(error);\n        reject(error);\n      }\n    });\n  },\n\n  remove: (name) => {\n    return new Promise((resolve, reject) => {\n      try {\n        localStorage.removeItem(name);\n        resolve();\n      } catch(error) {\n        console.error(error);\n        reject(error);\n      }\n    });\n  }\n};\n","import React from \"react\";\nimport { Storage } from \"../services/Storage\";\n\n// Storage Context\nconst StorageContext = React.createContext({});\n\n// Storage Context Provider\nconst StorageContextProvider = ({ children }) => {\n  const [userToken, setUserToken] = React.useState(\n    localStorage.getItem(\"AUTH_TOKEN\")\n  );\n\n  return (\n    <StorageContext.Provider value={{ userToken, setUserToken }}>\n      {children}\n    </StorageContext.Provider>\n  );\n};\n\n// Storage Context Consumer\nconst useStorage = () => {\n  const context = React.useContext(StorageContext);\n  return context;\n};\n\nexport { StorageContextProvider, useStorage, StorageContext };\n","import React from 'react';\nimport styles from './Loader.module.scss';\n\nconst Loader = () => (\n  <div className={styles.Loader} data-testid=\"Loader\">\n    <svg width=\"84\" height=\"60\" viewBox=\"0 0 84 60\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path className={styles.FirstCircle} d=\"M0 30C0 13.4315 13.4315 0 30 0V0C46.5685 0 60 13.4315 60 30V30C60 46.5685 46.5685 60 30 60V60C13.4315 60 0 46.5685 0 30V30Z\"/>\n      <g className={styles.BlendGroup}>\n        <rect className={styles.SecondCircle} x=\"24\" width=\"60\" height=\"60\" rx=\"30\" fill=\"#1436AD\"/>\n      </g>\n    </svg>\n  </div>\n);\n\nexport default Loader;\n","import React from \"react\";\nimport Loader from \"../components/Loader/Loader\";\nimport { useSession } from \"../providers/SessionContext\";\n\n// Context\nconst LoaderContext = React.createContext({});\n\n// Context Provider\nconst LoaderContextProvider = ({ children }) => {\n  const [isLoaderVisible, setIsLoaderVisible] = React.useState(false);\n\n  return (\n    <LoaderContext.Provider value={{ isLoaderVisible, setIsLoaderVisible }}>\n      <div className=\"loader-container\" data-isvisible={isLoaderVisible}>\n        <Loader></Loader>\n      </div>\n      {children}\n    </LoaderContext.Provider>\n  );\n};\n\n// Consumer\nconst useLoaderState = () => {\n  const context = React.useContext(LoaderContext);\n  return context;\n};\n\nexport { LoaderContext, LoaderContextProvider, useLoaderState };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Toast.module.scss\";\n\nconst Toast = ({ text, isShowClose, closeToast }) => (\n  <div className={styles.Toast} data-testid=\"Toast\">\n    <span>{text}</span>\n    {isShowClose && (\n      <div className={styles.CloseButton} onClick={closeToast}>\n        Close\n      </div>\n    )}\n  </div>\n);\n\nexport default Toast;\n","import React from \"react\";\nimport Toast from \"../components/Toast/Toast\";\n\n// Toast Context\nconst ToastContext = React.createContext({});\n\n// Toast Context Provider\nconst ToastContextProvider = ({ children }) => {\n  const [toastText, setToastText] = React.useState(null);\n  const [isShowClose, setIsShowClose] = React.useState(false);\n  const showToast = (text, duration = 3000) => {\n    setToastText(text);\n    if (duration > 3000) {\n      setIsShowClose(true);\n      setToastText(\"Showing close button\");\n    }\n    setTimeout(() => {\n      setToastText(null);\n      setIsShowClose(false);\n    }, duration);\n  };\n\n  return (\n    <ToastContext.Provider\n      value={{\n        showToast,\n        isShowClose,\n      }}\n    >\n      {children}\n      {toastText && (\n        <Toast\n          text={toastText}\n          isShowClose={isShowClose}\n          closeToast={() => setToastText(null)}\n        />\n      )}\n    </ToastContext.Provider>\n  );\n};\n\n// Toast Context Consumer\nconst useToast = () => {\n  const context = React.useContext(ToastContext);\n  return context;\n};\n\nexport { ToastContextProvider, useToast, ToastContext };\n","import React, { useContext, useEffect } from \"react\";\nimport PoemPostInput from \"../../components/PoemPostInput/PoemPostInput\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport { PoemService } from \"../../services/Poem\";\n\nconst HomePage = () => {\n  const { userToken } = useStorage();\n  const { showToast } = useToast();\n  const { setIsLoaderVisible } = useLoaderState();\n\n  // All the poems in the feed\n  const [feed, setFeed] = React.useState([]);\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"Discover\"].join(\": \");\n\n    // Retrieve a feed listing from the backend\n    setIsLoaderVisible(true);\n    if (userToken) {\n      PoemService.getUnauthenticatedFeed().then((poems) => {\n        setIsLoaderVisible(false);\n        setFeed([...feed, ...poems]);\n      });\n    } else {\n      PoemService.getUnauthenticatedFeed().then((poems) => {\n        setIsLoaderVisible(false);\n        setFeed([...feed, ...poems]);\n      });\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      <div style={{ margin: \"0 40px\", paddingTop: \"100px\" }}>\n        <PoemsList feed={feed}></PoemsList>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default HomePage;\n","import React, { useEffect } from 'react';\nimport styles from './NotFoundPage.module.scss';\nimport { Link } from 'react-router-dom';\n\nconst NotFoundPage = () => {\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, 'Page Not Found'].join(': ')\n  }, []);\n  \n  return (<div className=\"page-container\" style={{transform: 'translateY(-0px)'}}>\n    <div className={styles.NotFoundPage} data-testid=\"NotFoundPage\">\n      <section>\n        <svg width=\"600\" height=\"300\" viewBox=\"0 0 900 600\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#a)\"><path fill=\"transparent\" d=\"M0 0h900v600H0z\"/><path d=\"M157.59 257.731c-16.544 71.859 99.646 244.016 283.947 219.801 85.717-11.265 86.156-54.611 157.633-99.417 42.604-26.704 99.902-42.538 122.992-88.105 19.941-39.329 19.899-85.333 2.892-118.208-38.249-73.933-130.612-136.06-247.161-50.302-116.549 85.757-277.611-49.094-320.303 136.231z\" fill=\"url(#b)\"/><path d=\"M556.338 457.362c45.683-37.581 92.95-77.869 144.022-90.266 52.682-12.799 57.009 4.949 53.597 30.407-3.412 25.458-33.211 79.959-104.812 96.326-71.62 16.372-135.555-1.292-92.807-36.467z\" fill=\"#222\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M669.988 222.397v37.447H670a31.258 31.258 0 0 0-16.282 1.058 30.345 30.345 0 0 0-19.62 21.34 30.75 30.75 0 0 0 29.761 38.366 31.505 31.505 0 0 0 6.141-.616v37.447a24.549 24.549 0 0 1-24.551 24.549H608V382a31.253 31.253 0 0 0-1.058-16.281A30.347 30.347 0 0 0 585.6 346.1a30.752 30.752 0 0 0-38.367 29.76c.003 2.062.209 4.118.616 6.14l-37.437-.012c-13.556.003-24.548-10.983-24.552-24.538v-37.447a31.412 31.412 0 0 1-6.14.617 30.755 30.755 0 0 1-29.762-38.366 30.347 30.347 0 0 1 19.62-21.34 31.258 31.258 0 0 1 16.282-1.059h-.011v-37.447a24.548 24.548 0 0 1 24.551-24.55h37.449a31.334 31.334 0 0 1-.616-6.14 30.75 30.75 0 0 1 38.367-29.76 30.39 30.39 0 0 1 21.342 19.619A31.254 31.254 0 0 1 608 197.858h37.449a24.555 24.555 0 0 1 17.361 7.19 24.553 24.553 0 0 1 7.19 17.36m-413.107 22.063h37.567v-.012a31.36 31.36 0 0 0 1.061 16.334 30.445 30.445 0 0 0 21.409 19.683 30.85 30.85 0 0 0 38.488-29.857 31.547 31.547 0 0 0-.619-6.16h37.567a24.627 24.627 0 0 1 24.628 24.63v37.568h.012a31.35 31.35 0 0 0-16.334 1.062 30.442 30.442 0 0 0-19.681 21.409 30.851 30.851 0 0 0 29.855 38.49 31.469 31.469 0 0 0 6.16-.618l-.012 37.556c.002 13.599-11.018 24.626-24.616 24.63h-37.567c.408 2.028.615 4.092.618 6.16a30.851 30.851 0 0 1-38.488 29.857 30.443 30.443 0 0 1-21.408-19.683 31.36 31.36 0 0 1-1.062-16.334v.012h-37.566a24.626 24.626 0 0 1-24.628-24.63V367a31.469 31.469 0 0 1-6.16.618 30.849 30.849 0 0 1-29.855-38.49 30.484 30.484 0 0 1 19.682-21.409 31.345 31.345 0 0 1 16.333-1.062v-37.568a24.626 24.626 0 0 1 24.628-24.63\" fill=\"#666AF6\"/><path d=\"M118.659 471.348c-1.388-1.976-2.37-62.08-1.003-64.482 1.374-2.395 61.542-19.872 61.542-19.872s20.369-33.19 39.571-51.775c7.571-7.337 18.638-13.498 21.352-9.375 1.683 2.554-.989 9.093-4.768 15.976a.272.272 0 0 1-.034.062c-5.262 9.574-12.634 19.768-13.328 20.725a.864.864 0 0 0-.055.069s49.911-12.679 57.434-14.042c7.522-1.376 17.339-3.565 18.899 1.515 1.436 4.666-11.274 10.132-12.029 10.455.817-.227 18.088-4.997 20.651 1.508 1.903 4.838-15.959 13.993-16.488 14.255.446-.117 8.958-2.361 9.858 1.686 1.477 6.656-17.051 14.324-17.807 14.641.419-.104 7.303-1.728 7.798 1.996 1.223 9.223-62.511 34.787-81.987 41.98-19.497 7.186-88.211 36.653-89.606 34.678zm648.682-330.254c1.388 1.963 2.37 61.689 1.003 64.077-1.374 2.38-61.531 19.746-61.531 19.746s-20.366 32.982-39.565 51.45c-7.569 7.292-18.635 13.413-21.348 9.316-1.683-2.537.989-9.035 4.767-15.875.007-.021.021-.041.034-.062 5.262-9.514 12.632-19.644 13.326-20.595.041-.048.055-.068.055-.068s-49.902 12.599-57.424 13.953c-7.521 1.368-17.337 3.543-18.896-1.505-1.435-4.637 11.272-10.068 12.028-10.389-.818.225-18.086 4.965-20.648-1.498-1.903-4.809 15.956-13.906 16.485-14.166-.446.117-8.957 2.346-9.857-1.676-1.477-6.614 17.049-14.233 17.804-14.548-.419.103-7.301 1.717-7.796-1.984-1.222-9.165 62.5-34.569 81.973-41.716 19.494-7.141 88.196-36.423 89.59-34.46z\" fill=\"#F8AE9D\"/></g><defs><linearGradient id=\"b\" x1=\"251.53\" y1=\"722.027\" x2=\"724.85\" y2=\"-428.788\" gradientUnits=\"userSpaceOnUse\"><stop stop-color=\"#fff\"/><stop offset=\"1\" stop-color=\"#EEE\"/></linearGradient><linearGradient id=\"c\" x1=\"552.551\" y1=\"619.902\" x2=\"796.653\" y2=\"144.968\" gradientUnits=\"userSpaceOnUse\"><stop stop-color=\"#fff\"/><stop offset=\"1\" stop-color=\"#EEE\"/></linearGradient><clipPath id=\"a\"><path fill=\"#fff\" d=\"M0 0h900v600H0z\"/></clipPath></defs></svg>\n\n        <h1>Opps, for the one who's lost &mdash; this is a dead-end!</h1>\n        <p>You seem to have fallen off the wagon. Trace your way <Link to=\"/\">back to home.</Link> The page you're looking for seems to have been removed or doesn't exist at all, maybe you could check for typing errors and try again.</p>\n      </section>\n    </div>\n  </div>)\n};\n\nexport default NotFoundPage;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Poet.module.scss\";\n\nconst Poet = ({ poet }) => (\n  <a className={styles.Poet} href={[\"/rebbels/@\", poet.username].join(\"\")}>\n    <div\n      className={styles.PoetAvatar}\n      style={\n        {\n          backgroundImage: `url(${poet.display_photo})`,\n        }\n      }\n    ></div>\n    <div className=\"PoetDetails\">\n      <b className={styles.PoetName}>{poet.display_name.split(\" \")[0]}</b>\n    </div>\n  </a>\n);\n\nexport default Poet;\n","import React, { useEffect } from \"react\";\nimport Poet from \"../../components/Poet/Poet\";\nimport styles from \"./PoetsPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useHistory } from \"react-router\";\nimport qs from \"qs\";\n\nconst PoetsPage = () => {\n  const [rebbels, setRebbels] = React.useState([]);\n  const [pages, setPages] = React.useState([]);\n  const { userSession } = useSession();\n\n  // React routing capabilities\n  const router = useHistory();\n\n  // To be able to toggle the loader\n  const { setIsLoaderVisible } = useLoaderState();\n\n  // Get query parameters to get the page index\n  const defaultParams = qs.parse(router.location.search, {\n    ignoreQueryPrefix: true,\n  });\n  const [queryParameters, setQueryParameters] = React.useState(defaultParams);\n\n  // For when an error occurs when retrieving the rebbels\n  const [responseError, setResponseError] = React.useState(\"\");\n\n  // Getting rebbel poets from the backend\n  const getRebbelPoets = React.useCallback(() => {\n    setIsLoaderVisible(true);\n    setResponseError(\"\");\n    superagent\n      .get(\n        [\n          config.BACKEND,\n          \"rebbels?limit=10&start=\" + queryParameters.index,\n        ].join(\"/\")\n      )\n      .set(\"Authorization\", userSession ? userSession.token : undefined)\n      .end((_, response) => {\n        setIsLoaderVisible(false);\n        if (response) {\n          console.log(response.body);\n          if (response.statusCode === 200) {\n            setRebbels(response.body.data.rebbels);\n            // Rebuild the number of pages left\n            updatePagesCount(response.body.data.total_count);\n          } else {\n            setResponseError(\n              response.body.reason ||\n                \"An error has occurred while retrieving the poets from the server\"\n            );\n            updatePagesCount(1);\n          }\n        } else {\n          setResponseError(\n            \"An error has occurred while retrieving the poets from the server\"\n          );\n          updatePagesCount(1);\n        }\n      });\n  });\n\n  const updatePagesCount = (totalCount) => {\n    setPages([]);\n    const pIndexes = [];\n    for (let pIndex = 1; pIndex <= totalCount; pIndex++) {\n      pIndexes.push(pIndex);\n    }\n    setPages(pIndexes);\n  };\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"All Rebbel Poets\"].join(\n      \": \"\n    );\n\n    if (!queryParameters.index)\n      setQueryParameters({ ...queryParameters, index: 1 });\n    getRebbelPoets();\n  }, []);\n\n  return (\n    <div className=\"page-container\">\n      <div className=\"page-header\">\n        <span className=\"name\">All Rebbels</span>\n        <div className=\"flex-space\"></div>\n        <a href=\"/search?filter=by_rebbel\">\n          <span>Filter</span>\n        </a>\n      </div>\n\n      {/* Results retrieved from the backend retrieval */}\n      {!responseError && (\n        <div className={styles.Poets}>\n          {queryParameters.index === \"1\" && (\n            <Poet poet={{ display_name: \"Anonymous\", username: \"anonymous\" }} />\n          )}\n          {rebbels.map((poet) => (\n            <Poet poet={poet} key={poet._id} />\n          ))}\n        </div>\n      )}\n\n      {/* When an error has occured when retrieving the results */}\n      {responseError && (\n        <div>\n          <h2 style={{ textAlign: \"center\" }}>\n            {responseError} &mdash;{\" \"}\n            <a\n              style={{ fontSize: \"50px\", color: \"white\", userSelect: \"none\" }}\n              onClick={() => getRebbelPoets()}\n            >\n              Try this again.\n            </a>\n          </h2>\n        </div>\n      )}\n\n      {!!pages.length && (\n        <div className=\"more-pages\">\n          <div className=\"more-pages-title\">More Rebbels</div>\n          <div className=\"more-pages-links\">\n            {pages.map((pageNumber) => (\n              <a\n                href={[\"/rebbels?index=\", pageNumber].join(\"\")}\n                data-isactive={pageNumber.toString() === queryParameters.index}\n                key={pageNumber}\n              >\n                {pageNumber}\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PoetsPage;\n","import React from 'react';\nimport styles from './PreviewAvatar.module.scss';\n\nconst PreviewAvatar = ({ display_name, display_photo }) => (\n  <div className={styles.PreviewAvatar}\n    style={{backgroundImage: `url(${display_photo})`}} data-testid=\"PreviewAvatar\">\n    <div><div className={styles.PreviewDisplayName}>{ display_name }</div></div>\n  </div>\n);\n\n\nexport default PreviewAvatar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./PoemShareContents.module.scss\";\nimport config from \"../../config\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport IonIcon from \"@reacticons/ionicons\";\n\nconst PoemShareContents = ({ data, pTitle }) => {\n  const [shareLink, setShareLink] = React.useState(\n    [config.FRONTEND, data.shareLink].join(\"/\")\n  );\n  const { showToast } = useToast();\n\n  return (\n    <div className={styles.PoemShareContents} data-testid=\"PoemShareContents\">\n      <h4>Share with your friends</h4>\n      <div className={styles.ShareLinkInput}>\n        <input type=\"text\" value={shareLink} disabled />\n        <button\n          onClick={() => {\n            navigator.clipboard\n              .writeText(shareLink)\n              .then(() => showToast(\"Your share link has been copied.\"));\n          }}\n        >\n          Copy Link\n        </button>\n      </div>\n\n      <h6>You can also share to</h6>\n      <div className={styles.SocialMediaShare}>\n        <a\n          href={[\"https://api.whatsapp.com/send?text=\", data.shareText].join(\n            \"\"\n          )}\n          target=\"_blank\"\n        >\n          <IonIcon name=\"logo-whatsapp\"></IonIcon>\n        </a>\n        <a\n          target=\"_blank\"\n          href={[\n            \"https://www.facebook.com/sharer/sharer.php?u=\",\n            shareLink,\n          ].join(\"\")}\n          class=\"fb-xfbml-parse-ignore\"\n        >\n          <IonIcon name=\"logo-facebook\"></IonIcon>\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default PoemShareContents;\n","import React from \"react\";\nimport styles from \"./PoetProfile.module.scss\";\nimport { Link, useParams } from \"react-router-dom\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { PoemService } from \"../../services/Poem\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport ReactModal from \"react-modal\";\nimport PreviewAvatar from \"../../components/PreviewAvatar/PreviewAvatar\";\nimport PoemShareContents from \"../../components/PoemShareContents/PoemShareContents\";\n\nconst PoetProfile = () => {\n  // Get the username of the profile being browsed\n  const params = useParams();\n\n  // Read from the the user session if any to check if there's a need to reach the server to get data\n  const { userSession, setUserSession } = useSession();\n  const { userToken } = useStorage();\n  const { showToast } = useToast();\n  const { setIsLoaderVisible } = useLoaderState();\n\n  const [profileData, setProfileData] = React.useState(null);\n  const [feed, setFeed] = React.useState([]);\n\n  const [isShareModalOpen, _setShareModal] = React.useState(false);\n  const [shareText, setShareText] = React.useState(\"\");\n  const [shareLink, setShareLink] = React.useState(\"\");\n  const setShareModal = (state) => {\n    const link = [\"rebbels/@\", profileData.username].join(\"\");\n    setShareLink(link);\n    setShareText(\n      [\n        'View and follow \"',\n        profileData?.display_name,\n        '\" on Rebbel Poetry using the link https://rebbelpoetry.com/',\n        link,\n      ].join(\"\")\n    );\n    _setShareModal(state);\n  };\n\n  // Avatar preview\n  const [isAvatarPreviewOpen, setIsAvatarPreviewOpen] = React.useState(false);\n\n  // Contact the server to get the profile data from the backend.\n  const getProfileData = React.useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (userSession && userSession.username === params.poet) {\n      } else {\n        setIsLoaderVisible(true);\n\n        superagent\n          .get([config.BACKEND, \"rebbels\", params.poet].join(\"/\"))\n          .end((_, response) => {\n            setIsLoaderVisible(false);\n            if (response) {\n              if (response.statusCode === 200) {\n                resolve(response.body.data);\n                document.title = [\n                  process.env.REACT_APP_NAME,\n                  [\n                    response.body.data.display_name,\n                    \" (@\",\n                    response.body.data.username,\n                    \")\",\n                  ].join(\"\"),\n                ].join(\": \");\n              }\n            }\n          });\n      }\n    });\n  });\n\n  // Following / Unfollowing another rebbel\n  const toggleFollowStatus = () => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post(\n          [config.BACKEND, \"rebbels\", \"follow\", profileData.username].join(\"/\")\n        )\n        .set(\"Authorization\", userToken)\n        .end((_, response) => {\n          console.log(response);\n          if (response && response.status === 200) {\n            console.log(setUserSession, userSession);\n            setUserSession({ ...userSession, follows: response.body.data });\n            resolve();\n            console.log(\"Follows\", userSession.follows);\n          } else {\n            console.log(response.body.reason || \"Something went wrong.\");\n          }\n        });\n    });\n  };\n\n  // Selecting an avatar to upload and place\n  const selectUploadPhoto = () => {\n    // Create a temporary file select element to select an upload file\n    const i = document.createElement(\"input\");\n    i.type = \"file\";\n    i.accept = \".gif,.jpg,.jpeg,.png\";\n\n    // Programmatically click the temporary file select element\n    i.click();\n    i.addEventListener(\"change\", (e) => {\n      // Trigger a file upload and wait for it to finish then replace the profile picture\n      superagent\n        .post([config.BACKEND, \"assets\", \"upload\"].join(\"/\"))\n        .attach(\"file\", i.files[0])\n        .set(\"Authorization\", userToken)\n        .end((_, response) => {\n          if (response) {\n            if (response.status === 200) {\n              replaceProfileAvatar(response.body.data.large);\n            } else {\n              showToast(response.body.reason || \"Something went wrong.\");\n            }\n          } else {\n            showToast(\"Not connected to the internet.\");\n          }\n        });\n    });\n  };\n\n  // Replacing the avatar profile picture\n  const replaceProfileAvatar = (avatar_url) => {\n    // Simply just sending the uploaded image URL to an account PATCH\n    superagent\n      .patch([config.BACKEND, \"rebbels\", userSession.email_address].join(\"/\"))\n      .set(\"Authorization\", userToken)\n      .send({ display_photo: avatar_url })\n      .end((_, response) => {\n        if (response) {\n          if (response.status === 200) {\n            setUserSession({ ...userSession, display_photo: avatar_url });\n            setProfileData({ ...profileData, display_photo: avatar_url });\n\n            showToast(\"Profile avatar updated.\");\n          } else {\n            showToast(response.body.reason || \"Something went wrong.\");\n          }\n        } else {\n          showToast(\"No internet connection.\");\n        }\n      });\n  };\n\n  // Opening a preview modal for an avatar\n  const toggleAvatarPreview = () => {\n    setIsAvatarPreviewOpen(!isAvatarPreviewOpen);\n  };\n\n  React.useEffect(() => {\n    // document.title = process.env.REACT_APP_NAME + \": \" + name;\n    getProfileData().then((data) => {\n      setProfileData(data);\n      data.poems.forEach((poemId) =>\n        PoemService.getPoemData(poemId).then((poem) => {\n          const poems = feed;\n          poems.push(poem);\n          setFeed(poems);\n\n          // Do this to get the poems to show up\n          setTimeout(() => {\n            setProfileData({ ...data });\n          }, 100);\n        })\n      );\n    });\n  }, []);\n\n  return (\n    profileData && (\n      <div style={{ width: \"100%\" }} className=\"page-container\">\n        <ReactModal\n          isOpen={isAvatarPreviewOpen}\n          onRequestClose={() => toggleAvatarPreview()}\n          style={{\n            overlay: { zIndex: 60000 },\n            content: {\n              width: \"45%\",\n              padding: 0,\n              height: \"500px\",\n              margin: \"auto\",\n              position: \"absolute\",\n              bottom: \"20px\",\n              borderRadius: \"5px\",\n              border: \"3px solid black\",\n            },\n          }}\n        >\n          <PreviewAvatar\n            display_photo={profileData?.display_photo}\n            display_name={profileData?.display_name}\n          ></PreviewAvatar>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={isShareModalOpen}\n          onRequestClose={() => setShareModal(false)}\n          style={{\n            overlay: { zIndex: 60000 },\n            content: {\n              width: \"40%\",\n              height: \"300px\",\n              margin: \"auto\",\n              position: \"absolute\",\n              bottom: \"20px\",\n              borderRadius: \"0px\",\n              border: \"3px solid black\",\n            },\n          }}\n        >\n          <PoemShareContents\n            data={{\n              shareText: shareText,\n              shareLink: shareLink,\n            }}\n          />\n        </ReactModal>\n\n        <div className={styles.ProfilePage}>\n          <div className={styles.ProfileAvatarContainer}>\n            <div\n              className={styles.ProfileAvatar}\n              data-ischangeable={profileData.username == userSession?.username}\n              data-isviewable={profileData.username != userSession?.username}\n              onClick={() => {\n                profileData?.username == userSession?.username\n                  ? selectUploadPhoto()\n                  : toggleAvatarPreview();\n              }}\n              style={{\n                backgroundImage: `url(${profileData.display_photo})`,\n              }}\n            ></div>\n          </div>\n          <div className={styles.PageContents}>\n            <div className={styles.ProfileName}>\n              <span className={styles.Name}>\n                {profileData.display_name}{\" \"}\n                {userSession && userSession.username === profileData.username\n                  ? \"(Me)\"\n                  : \"\"}\n              </span>\n              <span className={styles.ProfleVerificationSign}></span>\n            </div>\n\n            <div className={styles.ProfileBiography}>\n              <span>{profileData.biography}</span>\n              {userSession && userSession.username === profileData.username ? (\n                profileData.biography.length !== 0 ? (\n                  <Link className={styles.ProfileBiographyEditButton}>\n                    Edit\n                  </Link>\n                ) : (\n                  <Link\n                    className={styles.ProfileBiographyEditButton}\n                    style={{ transform: \"translateX(-20px)\" }}\n                  >\n                    Add a biography\n                  </Link>\n                )\n              ) : (\n                \"\"\n              )}\n            </div>\n\n            <div className={styles.ProfileHeaderButtons}>\n              {userSession && userSession.username === profileData.username ? (\n                \"\"\n              ) : (\n                <button\n                  className={styles.FollowButton}\n                  style={{\n                    backgroundColor: userSession?.follows?.includes(\n                      profileData._id\n                    )\n                      ? \"#333\"\n                      : \"black\",\n                  }}\n                  onClick={() => {\n                    toggleFollowStatus().then(() => console.log());\n                  }}\n                >\n                  {userSession?.follows?.includes(profileData._id) ? (\n                    <span>Following &#10003;</span>\n                  ) : (\n                    <span style={{ positon: \"relative\" }}>\n                      Follow{\" \"}\n                      <span style={{ opacity: 0, positon: \"absolute\" }}>\n                        &#10003;\n                      </span>\n                    </span>\n                  )}\n                </button>\n              )}\n              {userSession && userSession.username === profileData.username ? (\n                <button>Share your profile</button>\n              ) : (\n                <button onClick={() => setShareModal(!isShareModalOpen)}>\n                  Share Profile\n                </button>\n              )}\n            </div>\n\n            <div className={styles.ProfileStats}>\n              <Link>\n                <b>{profileData.poems.length}</b> Poems Published\n              </Link>\n              <Link>\n                <b>{profileData.followers.length}</b> Followers\n              </Link>\n              <Link>\n                <b>{profileData.follows.length}</b> Follows\n              </Link>\n            </div>\n          </div>\n        </div>\n\n        {/* The contents of the profile */}\n        <div style={{ width: \"100%\" }}>\n          {profileData.poems.length ? (\n            <PoemsList feed={feed} />\n          ) : (\n            <h1>{profileData.display_name} has not published any poems yet.</h1>\n          )}\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default PoetProfile;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./PoemPageHeader.module.scss\";\nimport { Link } from \"react-router-dom\";\nimport { PoemService } from \"../../services/Poem\";\n\nconst PoemPageHeader = ({ poemData }) => {\n  // Retrieve the authors in the poem from the backend\n  const [poemAuthors, setPoemAuthors] = React.useState([]);\n  React.useEffect(() => {\n    // Get information of the poets\n    if (poemData) {\n      if (poemData?.author !== undefined) {\n        PoemService.getPoemAuthors([\n          poemData?.author,\n          ...poemData?.featured_poets,\n        ]).then((poets) => {\n          console.log(poets);\n          setPoemAuthors(poets);\n        });\n      } else {\n        setPoemAuthors([{ display_name: \"Anonymous\", username: \"anonymous\" }]);\n      }\n    }\n  }, [poemData]);\n\n  return (\n    <>\n      <div className={styles.PoemPageHeader}>\n        <div className={styles.BackgroundDiffuser}>\n          <div className={styles.PoemInformationContainer}>\n            <div>\n              <div\n                className={styles.PoemThumbnailImage}\n                style={{\n                  backgroundImage: `url(${poemData?.thumbnail})`,\n                }}\n              >\n                <div className={styles.PlayPauseButton}></div>\n              </div>\n            </div>\n            <div className={styles.PoemDetailsContainer}>\n              <h2 className={styles.PoemTitle}>{poemData?.title}</h2>\n              <div className={styles.PoemAuthor}>\n                Written by{\" \"}\n                <Link to={`/rebbels/@${poemAuthors[0]?.username}`}>\n                  {poemAuthors[0]?.display_name}\n                </Link>\n              </div>\n\n              <table className={styles.PoemMetadataItems}>\n                <tbody>\n                  <tr>\n                    <td>Read time</td>\n                    <td>\n                      <a href={[\"/search?keyword=\", poemData?.read_time?.split(\" \").join(\"+\")].join(\"\")}>{poemData?.read_time}</a>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Word count</td>\n                    <td>{poemData?.body?.split(\" \").length || 0} words</td>\n                  </tr>\n                  <tr>\n                    <td>Published on</td>\n                    <td>\n                      <a href={[\"/search?keyword=\", poemData?.time_created?.day?.split(\" \").join(\"+\")].join(\"\")}>{poemData?.time_created?.day}</a>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n              {/* Actions and stats of the poem */}\n            </div>\n\n            <div className={styles.PoemStats}>\n              <div></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PoemPageHeader;\n","import * as superagent from \"superagent\";\nimport config from \"../config\";\n\nexport const CommentsService = {\n  comment: (data, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"poems\", data.pId, \"comments\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .send(data)\n        .end((_, response) => {\n          CommentsService.respond(response, resolve, reject);\n        });\n    });\n  },\n  getComments: (pId) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get(\n          [config.BACKEND, \"poems\", pId, \"comments?start=0&limit=20\"].join(\"/\")\n        )\n        .end((_, response) => {\n          CommentsService.respond(response, resolve, reject);\n        });\n    });\n  },\n  react: (cId, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([config.BACKEND, \"poems\", \"comments\", cId, \"react\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          CommentsService.respond(response, resolve, reject);\n        });\n    });\n  },\n  update: (body, cId, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .patch([config.BACKEND, \"poems\", \"comments\", cId].join(\"/\"))\n        .set(\"Authorization\", token)\n        .send({ body })\n        .end((_, response) => {\n          CommentsService.respond(response, resolve, reject);\n        });\n    });\n  },\n  delete: (cId, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .delete([config.BACKEND, \"poems\", \"comments\", cId].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          CommentsService.respond(response, resolve, reject);\n        });\n    });\n  },\n  respond: (response, resolve, reject) => {\n    if (response)\n      if (response.statusCode === 200) resolve(response.body.data);\n      else reject(response.body.reason || \"Something went wrong.\");\n    else\n      reject(\n        \"No internet connection. Please connect your device and try again.\"\n      );\n  },\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Comment.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport Linkify from \"react-linkify\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { CommentsService } from \"../../services/Comments\";\nimport { PoemService } from \"../../services/Poem\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useSession } from \"../../providers/SessionContext\";\n\nconst Comment = ({ comment, update }) => {\n  const storage = useStorage();\n  const { userSession } = useSession();\n\n  // States\n  const [isEditMode, setEditMode] = React.useState(false);\n  const [commenter, setCommenter] = React.useState([]);\n  const editPoemTextarea = React.createRef();\n\n  // Get the comments as soon as the page loads up\n  React.useEffect(() => {\n    PoemService.getPoemAuthors([comment.commenter, \"61353484137f33dd6430333c\"]).then((commenters) => {\n      if (commenters.length) {\n        setCommenter(commenters[0]);\n      }\n    });\n  }, [comment]);\n\n  return (\n    <div className={styles.Comment}>\n      <div className={styles.CommentActions}>\n        <div className={styles.CommentLikesCount}>{comment?.likes_count}</div>\n        <div className={styles.CommentActionButtons}>\n          <div\n            className={styles.Like}\n            data-isliked={comment.likes.includes(userSession?._id)}\n            onClick={() =>\n              CommentsService.react(comment._id, storage.userToken).then((data) => {\n                if (!data.is_like) {\n                  comment.likes.splice(\n                    comment.likes.indexOf(userSession?._id), 1);\n                } else {\n                  comment.likes.push(userSession?._id);\n                }\n\n                comment.likes_count = data.likes_count;\n                update(comment, comment._id);\n              })\n            }\n          >\n            <IonIcon name=\"heart-sharp\" />\n          </div>\n\n        </div>\n      </div>\n      <div className={styles.CommentBody}>\n        {/* When edit mode is OFF */}\n        {!isEditMode && <Linkify>{comment.body}</Linkify>}\n\n        {/* When edit mode is ON */}\n        {isEditMode && (\n          <textarea\n            rows=\"2\"\n            placeholder=\"Type your comment...\"\n            defaultValue={comment.body}\n            ref={editPoemTextarea}\n          ></textarea>\n        )}\n\n        <span className={styles.CommentorNameDate}>\n          &mdash; By{\" \"}\n          <Link to={`/rebbels/@${commenter.username}`}>\n            {commenter?.display_name}\n          </Link>{\" \"}\n          on{\" \"}\n          <strong>\n            {comment.time_created?.day} at {comment?.time_created?.time}\n          </strong>\n        </span>\n\n        <div className={styles.CommentMoreActions}>\n          <a\n            onClick={() => {\n              if (isEditMode) {\n                CommentsService.update(editPoemTextarea.current.value, comment._id, storage.userToken).then(\n                  () => {\n                    update({ ...comment, body: editPoemTextarea.current.value }, comment._id);\n                    setEditMode(!isEditMode);\n                  }\n                );\n              } else {\n                setEditMode(!isEditMode);\n              }\n            }}\n          >\n            {isEditMode ? \"Save changes\" : \"Edit\"}\n          </a>\n          <a\n            onClick={() =>\n              CommentsService.delete(comment._id, storage.userToken).then(\n                () => {\n                  update(undefined, comment._id);\n                }\n              )\n            }\n          >\n            Delete\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./CommentsSection.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { CommentsService } from \"../../services/Comments\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport Linkify from \"react-linkify\";\nimport Comment from \"../../components/Comment/Comment\";\n\nconst CommentsSection = () => {\n  const { setIsLoaderVisible } = useLoaderState();\n  const params = useParams();\n  const storage = useStorage();\n\n  // States\n  const commentTextareaRef = React.createRef();\n  const [comments, setComments] = React.useState([]);\n\n  // To be able to run actions during and after posting comment\n  const postComment = () => {\n    setIsLoaderVisible(true);\n    CommentsService.comment(\n      {\n        pId: params.poemId,\n        body: commentTextareaRef.current.value,\n      },\n      storage.userToken\n    )\n      .then((comment) => {\n        setComments([...comments, comment]);\n        commentTextareaRef.current.value = \"\";\n        setIsLoaderVisible(false);\n      })\n      .catch((error) => {\n        setIsLoaderVisible(false);\n        console.log(\"error\", error);\n      });\n  };\n\n  // Get the comments as soon as the page loads up\n  React.useEffect(() => {\n    CommentsService.getComments(params.poemId)\n      .then((comments) => {\n        setComments(comments);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  return (\n    <section className={styles.CommentsSection} data-testid=\"CommentsSection\">\n      {comments.map((comment) => {\n        return (\n          <Comment\n            comment={comment}\n            update={(update, reference) => {\n              const cIndex = comments.findIndex((c) => c._id === reference);\n              if (cIndex > -1) {\n                const _comments = [...comments];\n                if (!update) {\n                  _comments.splice(cIndex, 1);\n                } else {\n                  _comments[cIndex] = update;\n                }\n                setComments(_comments);\n              }\n            }}\n          />\n        );\n      })}\n      <div className={styles.PostCommentField}>\n        <textarea\n          rows=\"2\"\n          placeholder=\"Type your comment...\"\n          ref={commentTextareaRef}\n        ></textarea>\n        <button onClick={postComment}>Post your comment</button>\n      </div>\n    </section>\n  );\n};\n\nexport default CommentsSection;\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from \"react\";\nimport { Link, useParams, useHistory } from \"react-router-dom\";\nimport PoemPageHeader from \"../../components/PoemPageHeader/PoemPageHeader\";\nimport CommentsSection from \"../../components/CommentsSection/CommentsSection\";\nimport PoemShareContents from \"../../components/PoemShareContents/PoemShareContents\";\nimport { PoemService } from \"../../services/Poem\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport styles from \"./PoemPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport ReactModal from \"react-modal\";\n\nconst PoemPage = () => {\n  const { setIsLoaderVisible } = useLoaderState();\n  const { userToken } = useStorage();\n  const { userSession, setUserSession } = useSession();\n  const { showToast } = useToast();\n  const history = useHistory();\n\n  // Toggling the editing mode of the poem\n  const [isEditMode, setIsEditMode] = React.useState(false);\n  const [shareText, setShareText] = React.useState(\"\");\n  const [shareLink, setShareLink] = React.useState(\"\");\n  const editableTextContentRef = React.createRef();\n\n  // Toggling the share modal\n  const [isShareModalOpen, _setShareModal] = React.useState(false);\n\n  // Reference of the poem text container, to easily calculate annotation position\n  const poemTextContainer = React.useRef();\n  const scrollButtonsContainer = React.useRef();\n\n  // Opens an annotation box at the point of the clicked target\n  const [annotationPosition, setAnnotationPosition] = React.useState(0);\n  const annotationContainer = React.useRef();\n  const [annotoationText, setAnnotationText] = React.useState(\n    \"Click on an annotation to read more about it's text. The Rebbel Poet left an explaination for the phrases he uses.\"\n  );\n\n  // When an annotation is active\n  const [activeIndex, setActiveIndex] = React.useState(-1);\n\n  // Tags of the poem\n  const [poemTags, setPoemTags] = React.useState([]);\n\n  const positionAnnotationContainer = (annotation, event) => {\n    if (event) {\n      const targetElement = event.target;\n      const targetRect = targetElement.getBoundingClientRect();\n      const textContainerRect =\n        poemTextContainer.current.getBoundingClientRect();\n\n      let targetPosition = targetRect.y - textContainerRect.y;\n\n      // Set the contents of the annotations to the annotations container\n      annotationContainer.current.style.display = \"block\";\n      setAnnotationText(annotation);\n\n      // Check if the the annotation container exceeds the bottom of the poem to bring it back up\n      const annotationContainerRect =\n        annotationContainer.current.getBoundingClientRect();\n      const annotationTotalSpace =\n        targetPosition + annotationContainerRect.height;\n\n      if (textContainerRect.height - annotationTotalSpace < 0) {\n        targetPosition =\n          textContainerRect.height - annotationContainerRect.height;\n      }\n\n      setAnnotationPosition(targetPosition);\n      // Set the position of the annotation container\n      annotationContainer.current.style.transform = [\n        \"translateY(\",\n        targetPosition,\n        \"px)\",\n      ].join(\"\");\n    } else {\n      setAnnotationPosition(0);\n      annotationContainer.current.style.display = \"block\";\n    }\n  };\n\n  const parseAnnotations = (text) => {\n    if (text) {\n      // Split the text using the \"|\" pipes\n      const splitText = text.split(\"|\");\n      const result = [];\n      for (let index = 0; index < splitText.length; index++) {\n        // Check if the split text has format |<TEXT>=<ANNOTATION>|\n        if (splitText[index].includes(\"=\")) {\n          const splitAnnotations = splitText[index].split(\"=\"),\n            _text = splitAnnotations[0],\n            annotation = splitAnnotations[1];\n          result.push(\n            <a\n              onClick={(event) => {\n                positionAnnotationContainer(annotation, event);\n                setActiveIndex(index);\n              }}\n              data-index={index}\n              data-isactive={index === activeIndex}\n            >\n              {_text}\n            </a>\n          );\n        } else {\n          result.push(<span>{splitText[index]}</span>);\n        }\n      }\n      return result;\n    } else {\n      return <span>Loading...</span>;\n    }\n  };\n\n  const deletePoem = () => {\n    PoemService.deletePoem(poemData?._id, userToken)\n      .then(() => {\n        showToast(\"Poem deleted.\");\n        history.push(\"/discover\");\n      })\n      .catch((error) => console.log(\"ERRRROR:\", error));\n  };\n\n  // Get the poem data when the page is opened\n  const params = useParams();\n  const setShareModal = (state) => {\n    const link = [\"~\", params.poemId].join(\"\");\n    setShareLink(link);\n    setShareText(\n      [\n        'View and read \"',\n        poemData?.title,\n        '\" on Rebbel Poetry using the link https://rebbelpoetry.com/',\n        link,\n      ].join(\"\")\n    );\n    _setShareModal(state);\n  };\n\n  const [poemData, setPoemData] = React.useState({});\n  React.useEffect(() => {\n    setIsLoaderVisible(true);\n    superagent\n      .get([config.BACKEND, \"poems\", params.poemId].join(\"/\"))\n      .end((_, response) => {\n        setIsLoaderVisible(false);\n\n        if (response) {\n          if (response.status === 200) {\n            setPoemData(response.body.data);\n            // Get the poem tags data\n            PoemService.getTags(response.body.data.tags, userToken).then(\n              (tags) => {\n                setPoemTags(tags);\n              }\n            );\n            document.title = [\n              process.env.REACT_APP_NAME,\n              \": \",\n              response.body.data.title,\n            ].join(\"\");\n          } else {\n            if (response.status === 404) {\n              history.push(\"/not_found\");\n              showToast(\"Poem was not found.\");\n            }\n          }\n        } else {\n          showToast(\"You're not connected with the internet.\");\n          setPoemData(null);\n        }\n      });\n  }, []);\n\n  // Toggle the poem action buttons as sticky or absolute as page is being scrolled\n  React.useEffect(() => {\n    // Determine whether or not if this is a guide page\n    if (poemData?.title) {\n      if (poemData?.title.includes(\"Guides: \")) {\n        poemTextContainer.current.classList.add(\"is-guide\");\n      }\n    }\n\n    let windowScrollListener = window.addEventListener(\"scroll\", (event) => {\n      const scrollY = window.scrollY;\n\n      // Get the distance between the scroll and buttons container and if < 20 make buttons sticky\n      const poemContent = poemTextContainer.current;\n      if (poemContent) {\n        const poemContentRect = poemContent.getBoundingClientRect();\n        const scrollDifference = poemContentRect.y - scrollY;\n        if (scrollDifference <= 0) {\n          scrollButtonsContainer.current.style.position = \"fixed\";\n          scrollButtonsContainer.current.style.top = \"200px\";\n        } else {\n          scrollButtonsContainer.current.style.position = \"absolute\";\n          scrollButtonsContainer.current.style.top = \"0px\";\n        }\n\n        if (scrollY > poemContentRect.bottom + 200) {\n          scrollButtonsContainer.current.style.opacity = 0;\n        } else {\n          scrollButtonsContainer.current.style.opacity = 1;\n        }\n      }\n    });\n  }, [poemData]);\n\n  return (\n    <>\n      <div className={styles.PoemPageContainer}>\n        <ReactModal\n          isOpen={isShareModalOpen}\n          onRequestClose={() => setShareModal(false)}\n          style={{\n            overlay: { zIndex: 60000 },\n            content: {\n              width: \"40%\",\n              height: \"300px\",\n              margin: \"auto\",\n              position: \"absolute\",\n              bottom: \"20px\",\n              borderRadius: \"0px\",\n              border: \"3px solid black\",\n            },\n          }}\n        >\n          <PoemShareContents\n            data={{\n              pId: poemData?._id,\n              shareText: shareText,\n              shareLink: shareLink,\n            }}\n            pTitle={poemData?.title}\n          />\n        </ReactModal>\n\n        <PoemPageHeader poemData={poemData}></PoemPageHeader>\n\n        <div className={styles.PoemContents}>\n          <div className={styles.PoemSplitSides}>\n            {/* The top of the poem text area */}\n            <div className={styles.SideButtons} ref={scrollButtonsContainer}>\n              <button\n                className={styles.Heart}\n                data-isLiked={poemData?.likes?.includes(userSession?._id)}\n                onClick={() => {\n                  PoemService.likePoem(poemData?._id, userToken).then(\n                    (data) => {\n                      // Update the number of likes on the poem data\n                      setPoemData({\n                        ...poemData,\n                        likes_count: data.likes_count,\n                        likes: data.likes,\n                      });\n                    }\n                  );\n                }}\n              >\n                {poemData?.likes?.includes(userSession?._id) ? (\n                  <IonIcon name=\"hand-left\"></IonIcon>\n                ) : (\n                  <IonIcon name=\"hand-left-outline\"></IonIcon>\n                )}\n                <span className=\"count\">{poemData?.likes_count}</span>\n              </button>\n\n              <button title=\"Users currently reading this poem.\">\n                <IonIcon name=\"eye-outline\"></IonIcon>\n                <span className=\"count\">{poemData?.views_count}</span>\n              </button>\n\n              <button\n                className={styles.Bookmark}\n                data-isBookmarked={userSession?.bookmarked_poems.includes(\n                  poemData?._id\n                )}\n                onClick={() => {\n                  // First check if there's a session in place\n                  if (userToken) {\n                    // Update the bookmarks of the user\n                    PoemService.bookmarkPoem(poemData?._id, userToken).then(\n                      (data) => {\n                        // Update the number of likes on the poem data\n                        setPoemData({\n                          ...poemData,\n                          bookmarks_count: data.bookmarks_count,\n                        });\n                        if (data.is_bookmark) {\n                          setUserSession({\n                            ...userSession,\n                            bookmarked_poems: [\n                              ...userSession.bookmarked_poems,\n                              poemData?._id,\n                            ],\n                          });\n                        } else {\n                          // Remove the poem ID from the bookmarks\n                          const bookmarkedPoems = userSession.bookmarked_poems;\n                          const bookmarkedPoemIndex = bookmarkedPoems.indexOf(\n                            poemData?._id\n                          );\n                          if (bookmarkedPoemIndex > -1) {\n                            bookmarkedPoems.splice(bookmarkedPoemIndex, 1);\n                            setUserSession({\n                              ...userSession,\n                              bookmarked_poems: bookmarkedPoems,\n                            });\n                          }\n                        }\n\n                        console.log(\"User session\", userSession);\n                      }\n                    );\n                  } else {\n                    showToast(\n                      \"You are not logged in. Sign in to bookmark this poem.\"\n                    );\n                  }\n                }}\n              >\n                {userSession?.bookmarked_poems.includes(poemData?._id) ? (\n                  <IonIcon name=\"bookmark-sharp\"></IonIcon>\n                ) : (\n                  <IonIcon name=\"bookmark-outline\"></IonIcon>\n                )}\n                <span className=\"count\">{poemData?.bookmarks_count}</span>\n              </button>\n\n              <button\n                className={styles.Share}\n                onClick={() => {\n                  setShareModal(!isShareModalOpen);\n                }}\n              >\n                <IonIcon name=\"share-outline\"></IonIcon>\n                <span className=\"count\">Share</span>\n              </button>\n            </div>\n\n            <div className={styles.PoemTextContainer} ref={poemTextContainer}>\n              {userSession && userSession._id === poemData?.author && (\n                <div className={styles.PoemActions}>\n                  <a\n                    onClick={() => {\n                      const state = !isEditMode;\n                      setIsEditMode(state);\n                      if (state) {\n                        editableTextContentRef.current.innerText =\n                          poemData?.body;\n                      } else {\n                        editableTextContentRef.current.innerText = \"\";\n                        PoemService.updatePoem(\n                          { body: poemData?.body },\n                          poemData?._id,\n                          userToken\n                        );\n                      }\n                    }}\n                  >\n                    {isEditMode ? \"Update\" : \"Edit\"}\n                  </a>\n\n                  {isEditMode ? (\n                    <a\n                      className=\"color-danger\"\n                      onClick={() => setIsEditMode(false)}\n                    >\n                      Cancel\n                    </a>\n                  ) : (\n                    <a className=\"color-danger\" onClick={deletePoem}>\n                      Delete\n                    </a>\n                  )}\n                  <div\n                    ref={editableTextContentRef}\n                    onKeyUp={() =>\n                      setPoemData({\n                        ...poemData,\n                        body: editableTextContentRef.current.innerText,\n                      })\n                    }\n                    contentEditable=\"true\"\n                    style={{\n                      borderBottom: isEditMode ? \"3px solid black\" : \"none\",\n                      paddingBottom: isEditMode ? \"20px\" : \"0\",\n                    }}\n                  ></div>\n\n                  {isEditMode && (\n                    <>\n                      <br></br>\n                      <h5>Resulting Changes:</h5>\n                      <br></br>\n                    </>\n                  )}\n                </div>\n              )}\n\n              {/* <ReactMarkdown\n                plugins={[remarkGfm]}\n                allowedElements={[\"span\", \"div\", \"a\"]}\n                style={{\n                  opacity: isEditMode ? \"0\" : \"1\",\n                  position: isEditMode ? \"absolute\" : \"relative\",\n                }}\n              ></ReactMarkdown> */}\n\n              <p\n                style={{ whiteSpace: \"pre-wrap\" }}\n                children={parseAnnotations(poemData?.body)}\n              ></p>\n            </div>\n\n            {/* Annotations container */}\n            <div\n              className={styles.AnnotationsContainer}\n              style={{ translate: `translateY(${annotationPosition}px)` }}\n              ref={annotationContainer}\n            >\n              <ReactMarkdown plugins={[remarkGfm]} linkTarget=\"_blank\">\n                {annotoationText}\n              </ReactMarkdown>\n            </div>\n          </div>\n\n          {/* Tags that have been given to the poem */}\n          {poemTags.length > 0 && (\n            <div className={styles.PoemTags}>\n              <span>Tags</span>\n              {poemTags.map((tag) => (\n                <a\n                  href={[\n                    \"/search?keyword=\",\n                    tag.name.toLowerCase().split(\" \").join(\"+\"),\n                  ].join(\"\")}\n                  className=\"tag\"\n                >\n                  {tag.name}\n                </a>\n              ))}\n            </div>\n          )}\n\n          {/* Poem statistics and Author details */}\n          <div className={styles.CommentsSection}>\n            <h4 className={styles.CommentsSectionHeader}>\n              <span className={styles.Name}>Community Commentations</span>\n              <span className={styles.Count}>\n                {poemData?.comments?.length\n                  ? [poemData?.comments.length, \"Comments\"].join(\" \")\n                  : \"No comments\"}{\" \"}\n                posted\n              </span>\n            </h4>\n\n            {/* The comments section */}\n            <CommentsSection commentIds={poemData?.comments} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PoemPage;\n","import React, { useEffect } from \"react\";\nimport styles from \"./SearchPage.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\nimport Poet from \"../../components/Poet/Poet\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useHistory } from \"react-router-dom\";\nimport qs from \"qs\";\n\nconst SearchPage = () => {\n  const [searchValue, setSearchValue] = React.useState(null);\n  const [results, setResults] = React.useState({});\n  const { setIsLoaderVisible } = useLoaderState();\n  const { showToast } = useToast();\n  const history = useHistory();\n  console.log(history);\n\n  const getSearchResults = (optionalKeyword) => {\n    history.push(\n      [history.location.pathname, \"?keyword=\", searchValue].join(\"\")\n    );\n\n    // Reset the results\n    setResults({});\n\n    setIsLoaderVisible(true);\n    superagent\n      .get(\n        [\n          config.BACKEND,\n          [\n            \"search?keyword=\",\n            (searchValue || optionalKeyword).split(\" \").join(\"+\"),\n          ].join(\"\"),\n        ].join(\"/\")\n      )\n      .end((_, response) => {\n        setIsLoaderVisible(false);\n        if (response) {\n          if (response.status === 200) {\n            setResults(response.body.data);\n            console.log(response.body);\n          } else {\n            showToast(response.body.reason || \"Something went wrong.\");\n          }\n        } else {\n          showToast(\"No internet connection.\");\n        }\n      });\n  };\n\n  useEffect(() => {\n    const params = qs.parse(history.location.search, {\n      ignoreQueryPrefix: true,\n    });\n    document.title = [process.env.REACT_APP_NAME, \"Search\"].join(\": \");\n\n    if (params.keyword) {\n      setSearchValue(params.keyword);\n      getSearchResults(params.keyword);\n    }\n  }, []);\n\n  return (\n    <>\n      <div className=\"page-container\">\n        <h1 className={styles.PageTitle}>Search</h1>\n        <div className={styles.SearchInputContainer}>\n          <input\n            className={styles.LargeSearchInput}\n            type=\"text\"\n            defaultValue={searchValue}\n            placeholder=\"Search for Rebbel Poems / Rebbel Poets\"\n            onKeyUp={(event) => {\n              setSearchValue(event.target.value);\n              setResults({});\n            }}\n          />\n          <div className={styles.SearchButton} onClick={getSearchResults}>\n            <IonIcon name=\"arrow-forward-sharp\"></IonIcon>\n          </div>\n        </div>\n\n        {results.poems && (\n          <>\n            <h4 style={{ textAlign: \"center\" }}>\n              {results.poems?.length || results.authors?.length\n                ? \"All results for \"\n                : \"No results found for keyword\"}{\" \"}\n              \"{searchValue}\"\n            </h4>\n\n            {!!results.authors.length && (\n              <>\n                <h1>Rebbel Poets</h1>\n                <div className={styles.Rebbels}>\n                  {results.authors.map((rebbel) => (\n                    <Poet poet={rebbel}></Poet>\n                  ))}\n                </div>\n              </>\n            )}\n\n            {!!results.poems.length && (\n              <>\n                <h1>Poems Results</h1>\n                <PoemsList feed={results.poems}></PoemsList>\n              </>\n            )}\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default SearchPage;\n","import React from \"react\";\nimport styles from \"./Footer.module.scss\";\nimport Logo from \"../../logo.svg\";\nimport { Link } from \"react-router-dom\";\n\nconst Footer = () => (\n  <div className={styles.FooterContainer}>\n    <div className={styles.Footer}>\n      {/* RIGHT SECTION */}\n      <section className={styles.LeftSection}>\n        <img src={Logo} alt=\"\" />\n        <a className={styles.BrandName} href=\"/\">\n          {process.env.REACT_APP_NAME}\n        </a>\n\n        <div className={styles.Legal}>\n          All poems on this site are part of copyrights of their respective\n          poets. All content on this site is published here under{\" \"}\n          <a href=\"https://creativecommons.org/licenses/\" target=\"_blank\">\n            Creative Commons License\n          </a>\n          .\n        </div>\n      </section>\n\n      {/* FIRST MIDDLE SECTION */}\n      <section className={styles.FirstMiddleSection}>\n        <div className={styles.SectionName}>Navigation</div>\n\n        <Link to=\"/\">Top Ranked Poems</Link>\n        <Link to=\"/poets\">Top Rebel Poets</Link>\n        <Link to=\"/my_drafts\">View your Drafts</Link>\n        <Link to=\"/feeling_lucky\">I'm Feeling Lucky</Link>\n        <Link to=\"/search\">Search Poems</Link>\n      </section>\n\n      {/* SECOND MIDDLE SECTION */}\n      <section className={styles.SecondMiddleSection}>\n        <div className={styles.SectionName}>Poems</div>\n\n        <Link to=\"/\">All Poems</Link>\n        <Link to=\"/\">Poem By Language</Link>\n        <Link to=\"/\">Explore All Poets</Link>\n        <Link to=\"/\">Competitions</Link>\n      </section>\n\n      {/* RIGHT SECTION */}\n      <section className={styles.SecondMiddleSection}>\n        <div className={styles.SectionName}>General</div>\n\n        <Link to=\"/\">Donate</Link>\n        <Link to=\"/\">About Us</Link>\n        <Link to=\"/\">Licensing</Link>\n        <Link to=\"/\">Legal</Link>\n      </section>\n    </div>\n\n    <div className={styles.Attribution}>\n      Rebbel Poetry (Pty) Ltd. Copyright &copy; {new Date().getFullYear()}. All right reserved.\n    </div>\n  </div>\n);\n\nexport default Footer;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./SignUpPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { Storage } from \"../../services/Storage\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst SignUpPage = () => {\n  const { setUserSession } = useSession();\n  const router = useHistory();\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"Create an account\"].join(\n      \": \"\n    );\n  }, []);\n\n  const [requestData, setRequestData] = useState({\n    email_address: \"\",\n    display_name: \"\",\n    password: \"\",\n  });\n\n  // When an error occurs while trying to create an account\n  const [responseError, setResponseError] = useState(\"\");\n\n  const onInputKeyup = (event) => {\n    if (event.target.name) {\n      setRequestData({\n        ...requestData,\n        [event.target.name]: event.target.value,\n      });\n    }\n  };\n\n  const onFormSubmit = (event) => {\n    event.preventDefault();\n    // Reset the response error text\n    setResponseError(\"\");\n\n    // Make sure the user has entered important information to create the account\n    if (\n      requestData.email_address &&\n      requestData.display_name &&\n      requestData.password\n    ) {\n      // Send an account create request to the backend\n      superagent\n        .post([config.BACKEND, \"rebbels\"].join(\"/\"))\n        .send(requestData)\n        .end((_, response) => {\n          if (response) {\n            if (response.statusCode === 200) {\n              Storage.set(\"AUTH_TOKEN\", response.body.data.token);\n              setUserSession(response.body.data);\n              router.push(\"/\");\n              // TODO: Show a welcome modal\n            } else {\n              // Means the account already exists\n              if (response.statusCode === 208) {\n                setResponseError(\n                  `Account with that email address already exists. Please sign in if this is your account.`\n                );\n              }\n            }\n          } else {\n            setResponseError(\n              \"You are not connected to the internet. Please check your connection and try again.\"\n            );\n          }\n        });\n    } else {\n      // Let the user know the form is incomplete\n      setResponseError(\n        \"All fields are mandatory, please make sure you fill every field to create an account.\"\n      );\n    }\n  };\n\n  return (\n    <>\n      <div className=\"page-container\">\n        <form onSubmit={onFormSubmit} className=\"form\">\n          <h1>Join Rebbels</h1>\n\n          {responseError ? (\n            <p className={[styles.ResponseError, \"danger\"].join(\" \")}>\n              {\" \"}\n              <b>{responseError}</b>{\" \"}\n            </p>\n          ) : (\n            \"\"\n          )}\n\n          <input\n            type=\"text\"\n            placeholder=\"Email address\"\n            name=\"email_address\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Your name\"\n            name=\"display_name\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Enter a password\"\n            name=\"password\"\n            onKeyUp={onInputKeyup}\n          />\n          <button type=\"submit\">Become a Member</button>\n\n          <p>\n            We are glad to have you onboard, by creating an account you agree to\n            our <Link to=\"\">Terms and Conditions</Link>. If you are already a\n            member you can <Link to=\"/sign_in\">Sign in to your account.</Link>\n          </p>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default SignUpPage;\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { Storage } from \"../../services/Storage\";\n\nconst SignInPage = () => {\n  // Response error\n  const [responseError, setResponseError] = React.useState(\"\");\n  const { setUserSession } = useSession();\n  const { setUserToken } = useStorage();\n  const { setIsLoaderVisible } = useLoaderState();\n  \n  const [signInData, setSignInData] = React.useState({\n    username: \"\",\n    password: \"\",\n  });\n  const router = useHistory();\n\n  const onInputKeyup = (event) => {\n    if (event.target.name) {\n      setSignInData({ ...signInData, [event.target.name]: event.target.value });\n    }\n  };\n\n  // Form submit\n  const onFormSubmit = (event) => {\n    event.preventDefault();\n\n    setResponseError(\"\");\n    // Turn the credentials into Basic authentication\n    if (signInData.username && signInData.password) {\n      const credentialsData = [\n        \"Basic\",\n        btoa([signInData.username, signInData.password].join(\":\")),\n      ].join(\" \");\n\n      // Send the authentication request\n      superagent\n        .get([config.BACKEND, \"rebbels/authentication\"].join(\"/\"))\n        .set(\"Authorization\", credentialsData)\n        .end((_, response) => {\n          if (response) {\n            if (response.statusCode === 200) {\n              // Set the token to be saved\n              Storage.set(\"AUTH_TOKEN\", response.body.data.token);\n              setUserSession(response.body.data);\n              setUserToken(response.body.data.token);\n              router.push(\"/discover\");\n            } else {\n              setResponseError(\n                response.body.reason ||\n                  \"Something went wrong. Please try again, contact us if error persists.\"\n              );\n            }\n          } else {\n            // TODO: Show a modal error\n            setResponseError(\n              \"No internet, please check your connection and try again.\"\n            );\n          }\n        });\n    } else {\n      setResponseError(\n        \"All fields are required. Please make sure they are all filled.\"\n      );\n    }\n\n    // Make sure the loader state is OFF\n    setIsLoaderVisible(false);\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"page-container\">\n        <form action=\"\" className=\"form\" onSubmit={onFormSubmit}>\n          <h1>Login</h1>\n          {responseError && <p className=\"danger\">{responseError}</p>}\n          <input\n            type=\"text\"\n            placeholder=\"Your email or username\"\n            name=\"username\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            name=\"password\"\n            onKeyUp={onInputKeyup}\n          />\n\n          <button>Sign In to your Account</button>\n\n          <p>\n            By signing in you agree to out{\" \"}\n            <Link to=\"\">Terms and Conditions</Link>. If you don't have an\n            account you can <Link to=\"/sign_up\">create one here.</Link>\n          </p>\n        </form>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default SignInPage;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./DraftsPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\n\nconst DraftsPage = () => {\n  const [drafts, setDrafts] = React.useState([]);\n  const { showToast } = useToast();\n  const storage = useStorage();\n\n  // Retrieve the drafts from the backend\n  React.useEffect(() => {\n    superagent\n      .get([config.BACKEND, \"drafts\"].join(\"/\"))\n      .set(\"Authorization\", storage.userToken)\n      .end((_, response) => {\n        if (response) {\n          if (response.status === 200) {\n            setDrafts(response.body.data);\n          } else {\n            showToast(response.reason || \"Something went wrong.\");\n          }\n        } else {\n          showToast(\"You are not connected to the internet.\");\n          setDrafts(null);\n        }\n      });\n  }, []);\n\n  return (\n    <div className=\"page-container\" data-testid=\"DraftsPage\">\n      {drafts === null && (\n        <div>\n          <section>\n            <h1>Something happened while retrieving your drafts.</h1>\n            <p>\n              If this error persists, please contact us and let us know about\n              the issue.\n            </p>\n          </section>\n        </div>\n      )}\n      {drafts !== null && (\n        <div>\n          <h1>All Your Drafts</h1>\n          <PoemsList feed={drafts} isDrafts={true} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DraftsPage;\n","import React from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport Loader from \"../../components/Loader/Loader\";\nimport styles from \"./FeelingLuckyPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\n\nconst FeelingLuckyPage = () => {\n  const history = useHistory();\n  const { showToast } = useToast();\n  const [isError, setIsError] = React.useState(false);\n\n  // Reach the server to get a random poem\n  React.useEffect(() => {\n    superagent\n      .get([config.BACKEND, \"poems\", \"feeling_lucky\"].join(\"/\"))\n      .end((_, response) => {\n        if (response) {\n          if (response.status === 200) {\n            // Route to a poem page to show the random poem\n            history.push([\"/~\", response.body.data[\"_id\"].toUpperCase()].join(\"\"));\n          } else {\n            showToast(response.body.reason || \"Something went wrong.\");\n            setIsError(true);\n          }\n        } else {\n          showToast(\"You're are not connected to the internet.\");\n          setIsError(true);\n        }\n      });\n  }, []);\n\n  return (\n    <div className=\"page-container\">\n      {isError && (\n        <div>\n          <section>\n            <h1>Something happened while retrieving a random poem.</h1>\n            <p>\n              If this error persists, please contact us and let us know about\n              the issue.\n            </p>\n          </section>\n        </div>\n      )}\n\n      {!isError && (\n        <div>\n          <section style={{ textAlign: \"center\" }}>\n            <h1 style={{ marginBottom: \"20px\" }}>Let's spoil up!</h1>\n            <Loader></Loader>\n          </section>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FeelingLuckyPage;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./RootWrapper.module.scss\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useHistory } from \"react-router-dom\";\nimport * as superagent from \"superagent\";\nimport config from \"../../config\";\nimport { Storage } from \"../../services/Storage\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\n\nconst RootWrapper = ({ children }) => {\n  const { setUserSession } = useSession();\n  const { setIsLoaderVisible } = useLoaderState();\n  const router = useHistory();\n  const { userToken } = useStorage();\n\n  // On App startup, request the data of the user from the backend\n  React.useEffect(() => {\n    // Check if there is a session token available\n    if (userToken) {\n      // Send a get data request to the backend\n      setIsLoaderVisible(true);\n      superagent\n        .get([config.BACKEND, \"rebbels\", \"reauthenticate\"].join(\"/\"))\n        .set(\"Authorization\", userToken)\n        .end((_, response) => {\n          // At first the loader will be shown for the page to fully load, hide it after page has fully loaded\n          setIsLoaderVisible(false);\n\n          if (response) {\n            if (response.statusCode === 200) {\n              setUserSession(response.body.data);\n            } else {\n              if (response.statusCode === 404) {\n                console.log(\"Not found.\");\n              } else if (response.statusCode === 403) {\n                console.log(\"Unauthorized.\");\n              } else if (response.statusCode === 510) {\n                console.log(\"Session expired.\");\n              } else {\n                console.log(\"Something went wrong.\");\n              }\n\n              // Remove the session token from the storage\n              Storage.remove(\"AUTH_TOKEN\");\n\n              console.log(\"Restart.\");\n              // Take the user to a user sign in page to re-authenticate them\n              router.push(\"/sign_in\");\n            }\n          } else {\n            // TODO: Show a toast error\n          }\n        });\n    }\n  }, []);\n\n  return <>{children}</>;\n};\n\nexport default RootWrapper;\n","import React from \"react\";\nimport styles from \"./DraftPreview.module.scss\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { PoemService } from \"../../services/Poem\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\n\nconst DraftPreview = ({ data, token, isPublished }) => {\n  const { userToken } = useStorage();\n  const { isLoaderVisible, setIsLoaderVisible } = useLoaderState()\n\n  const [draftContainerWidth, setDraftPreviewContainer] = React.useState(0);\n  const tagsInput = React.createRef();\n\n  // Where all the annotations will be displayed\n  const annotationText = React.createRef();\n  \n  const [activeIndex, setActiveIndex] = React.useState(-1);\n\n  const publishDraft = () => {\n    setIsLoaderVisible(true)\n    PoemService.publish(data, tagsInput.current.value, userToken)\n      .then((poemId) => {\n        setIsLoaderVisible(false);\n        isPublished(poemId.toUpperCase());\n      })\n  }\n\n  const positionAnnotationContainer = (annotation, event) => {\n    if (annotationText.current) {\n      annotationText.current.innerText = annotation;\n    }\n  }\n\n  const parseAnnotations = (text) => {\n    if (text) {\n      // Split the text using the \"|\" pipes\n      const splitText = text.split(\"|\");\n      const result = [];\n      for (let index = 0; index < splitText.length; index++) {\n        // Check if the split text has format |<TEXT>=<ANNOTATION>|\n        console.log(splitText[index])\n        if (splitText[index].includes(\"=\")) {\n          const splitAnnotations = splitText[index].split(\"=\"),\n                _text = splitAnnotations[0],\n                annotation = splitAnnotations[1];\n          console.log(_text, annotation)\n          result.push(<a onClick={(event) => {\n            positionAnnotationContainer(annotation, event);\n            setActiveIndex(index);\n          }} data-index={index} data-isactive={index === activeIndex}>{_text}</a>)\n        } else {\n          result.push(<span>{splitText[index]}</span>)\n        }\n      }\n      return result\n    } else {\n      return <span>Loading...</span>\n    }\n  }\n\n  React.useState(() => {\n    // Change the width of the bottom buttons when the width changes\n    const windowResizeListener = window.addEventListener(\"resize\", () => {\n      const draftContainer = document.getElementById(\"draft-container\");\n      if (draftContainer)\n        setDraftPreviewContainer(draftContainer.innerWidth)\n      console.log(draftContainer)\n    });\n  }, []);\n\n  return (\n    <div className={styles.DraftPreview} id=\"draft-container\" onScroll={(event) => {console.log(event)}}>\n      <div className={styles.DraftTitle}>\n        {data.title || \"No title entered yet.\"} (preview)\n      </div>\n\n      <div className={styles.DraftSplitSides}>\n        <div className={styles.DraftContents}>\n          <p className={styles.DraftAnnotationsText} style={{whiteSpace: \"pre-wrap\"}} children={parseAnnotations(data.body) || \"Click on an annotation to read it's description\"}></p>\n\n          {/* <ReactMarkdown children={data.body} plugins={[remarkGfm]}></ReactMarkdown> */}\n        </div>\n        <div className={styles.DraftAnnotations}>\n          <div className={styles.DraftAnnotationsText} ref={annotationText}>Click on an annotation to read it's description</div>\n        </div>\n      </div>\n\n      <div className={styles.BottomButtons}>\n        {/* The input for adding tags of the poem*/}\n        <input placeholder=\"Comma seperated Tags, eg. Love, Teenagers, Fun\" ref={tagsInput} />\n\n        <button disabled={isLoaderVisible} className=\"primary\" onClick={publishDraft}>Publish Poem</button>\n      </div>\n    </div>\n  )\n};\n\nexport default DraftPreview;\n","import IonIcon from \"@reacticons/ionicons\";\nimport React from \"react\";\nimport styles from \"./NewPoem.module.scss\";\nimport ReactModal from \"react-modal\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { nanoid } from \"nanoid\";\nimport qs from \"qs\";\nimport { PoemService } from \"../../services/Poem\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport DraftPreview from \"../../components/DraftPreview/DraftPreview\";\n\nfunction NewPoem() {\n  const { userToken } = useStorage();\n  const { setIsLoaderVisible } = useLoaderState();\n  const { showToast } = useToast();\n  const [isPreviewOpen, setIsPreviewOpen] = React.useState(false);\n  const [uploadProgress, setUploadProgress] = React.useState(0);\n  const router = useHistory();\n\n  const [draftData, setDraftData] = React.useState({\n    did: \"\",\n    title: \"\",\n    body: \"\",\n    thumbnail: \"\",\n    tags: [],\n    featured_poets: [],\n    is_anonymous: false,\n    time_created: new Date().toISOString(),\n    is_created: false,\n  });\n  const [changeInterval, setChangeInterval] = React.useState(null);\n\n  const titleInputRef = React.createRef();\n\n  React.useState(() => {\n    document.title = [process.env.REACT_APP_NAME, \"New Poem\"].join(\": \");\n\n    // From the location of the page, determine the draft id or create a new one\n    const params = qs.parse(router.location.search, {\n      ignoreQueryPrefix: true,\n    });\n    const did = nanoid().toUpperCase();\n\n    if (params.draft_id) {\n      setDraftData({ ...draftData, did: params.draft_id });\n      PoemService.getDraft(params.draft_id, userToken)\n        .then((draft) => {\n          console.log(\"Found draft:\", draft);\n          // Reload the draft data from the recovered draft\n          setDraftData({\n            did: params.draft_id,\n            thumbnail: draft.thumbnail,\n            title: draft.title,\n            body: draft.body,\n            featured_poets: draft.featured_poets,\n            time_created: draft.time_created.toString(),\n            is_anonymous: draft.is_anonymous,\n            is_created: true,\n          });\n        })\n        .catch((error) => console.log(error));\n    } else {\n      setDraftData({ ...draftData, did });\n      router.push([router.location.pathname, \"?draft_id=\", did].join(\"\"));\n    }\n  }, []);\n\n  // When a field in the poem changes be sure to sync that change with the draft\n  const onFieldChange = (ev) => {\n    const changes = { name: ev.target.name, value: ev.target.value };\n    setDraftData({ ...draftData, [changes.name]: changes.value });\n\n    if (ev.target.name === \"title\")\n      titleInputRef.current.style.height =\n        titleInputRef.current.scrollHeight + \"px\";\n\n    // TODO: Change only on an interval.\n  };\n\n  // When the user needs to select image files\n  const imageInputRef = React.useRef();\n  const onImageSelect = () => {\n    // Preview the file on the poem page then upload the image in the background\n    if (imageInputRef.current.files.length) {\n      showToast(\"Uploading thumbnail image.\");\n      // Upload the file to the backend server\n      PoemService.uploadThumbnail(\n        imageInputRef.current.files[0],\n        userToken,\n        setUploadProgress\n      ).then((data) => {\n        showToast(\"Thumbnail uploaded and saved.\");\n        setDraftData({ ...draftData, thumbnail: data.large });\n        PoemService.updateDraft(draftData, userToken);\n      });\n    }\n  };\n\n  // To be able to get rid of the change interval listener/timer use an effect clean up\n  React.useEffect(() => {}, []);\n\n  return (\n    <div className={styles.PageContainer}>\n      {/* When the preview and publish button is pressed */}\n      <ReactModal\n        isOpen={isPreviewOpen}\n        onRequestClose={() => setIsPreviewOpen(false)}\n        style={{\n          overlay: { zIndex: 60000 },\n          content: {\n            width: \"80%\",\n            margin: \"auto\",\n            borderRadius: \"0px\",\n            border: \"3px solid black\",\n          },\n        }}\n      >\n        <DraftPreview\n          data={draftData}\n          isPublished={(poemId) => {\n            setIsPreviewOpen(false);\n            router.push([\"/~\", poemId].join(\"\"));\n          }}\n          token={userToken}\n        ></DraftPreview>\n      </ReactModal>\n\n      {/* New poem header element */}\n      <div\n        className={styles.NewPoemHeaderContainer}\n        style={{\n          backgroundImage: `url(${draftData.thumbnail})`,\n        }}\n      >\n        <div className={styles.NewPoemImageContainer}>\n          <input\n            type=\"file\"\n            ref={imageInputRef}\n            onChange={onImageSelect}\n            accept=\"image/png, image/jpg, image/jpeg, image/gif, image/webp, image/bmp\"\n            hidden\n          />\n          <div\n            className={styles.NewPoemImageSelector}\n            onClick={() => imageInputRef.current.click()}\n            style={{\n              backgroundImage: `url(${draftData.thumbnail})`,\n            }}\n          >\n            <IonIcon name=\"add-sharp\"></IonIcon>\n            <div\n              className={styles.ImageUploadProgress}\n              style={{\n                width:\n                  uploadProgress === 0\n                    ? uploadProgress\n                    : `calc(${uploadProgress}% + 6px)`,\n              }}\n            ></div>\n          </div>\n        </div>\n        <div className={styles.NewPoemDetails}>\n          <textarea\n            className={styles.NewPoemTitle}\n            autoFocus={true}\n            name=\"title\"\n            rows={draftData.title.split(\"\\n\").length}\n            value={draftData.title}\n            ref={titleInputRef}\n            onChange={onFieldChange}\n            placeholder=\"Poem title\"\n          ></textarea>\n\n          <span>\n            Currently syncing edits to{\" \"}\n            <a href=\"/your_drafts\" target=\"_blank\" referrerPolicy=\"no-referrer\">\n              Draft ({draftData.did})\n            </a>\n            .\n          </span>\n          <table className={styles.PoemMetadataItems}>\n            <tbody>\n              <tr>\n                <td>Written by</td>\n                <td>\n                  <span\n                    className=\"link\"\n                    onClick={() =>\n                      setDraftData({\n                        ...draftData,\n                        is_anonymous: !draftData.is_anonymous,\n                      })\n                    }\n                  >\n                    {draftData.is_anonymous ? \"Anonymous\" : \"Yourself\"}\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td>Features</td>\n                <td>\n                  <Link>Add a rebbel</Link>\n                </td>\n              </tr>\n              <tr>\n                <td>Created on</td>\n                <td>\n                  <Link>{draftData.time_created}</Link>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n\n          <br />\n          <div className=\"flex\">\n            <button\n              onClick={() => {\n                setIsLoaderVisible(true);\n                PoemService.updateDraft(draftData, userToken)\n                  .then(() => {\n                    showToast(\"Draft saved.\");\n                    setIsLoaderVisible(false);\n                  })\n                  .catch(() => setIsLoaderVisible(false));\n              }}\n            >\n              Save Draft\n            </button>\n            <button\n              className=\"outline\"\n              onClick={() => {\n                setIsLoaderVisible(true);\n                PoemService.updateDraft(draftData, userToken)\n                  .then(() => {\n                    setIsLoaderVisible(false);\n                    setIsPreviewOpen(true);\n                  })\n                  .catch((error) => {\n                    console.log(\"Error something went wrong.\");\n                    setIsLoaderVisible(false);\n                  });\n              }}\n            >\n              Preview and Publish\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* The poem contents */}\n      <div className={styles.NewPoemContentsContainer}>\n        <textarea\n          placeholder=\"Type your poem body here...\"\n          rows={draftData.body.split(\"\\n\").length}\n          name=\"body\"\n          onChange={onFieldChange}\n          value={draftData.body}\n        ></textarea>\n      </div>\n    </div>\n  );\n}\n\nexport default NewPoem;\n","import React from \"react\";\nimport Header from \"./components/Header/Header\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\n\n// Pages\nimport HomePage from \"./pages/HomePage/HomePage\";\nimport NotFoundPage from \"./pages/NotFoundPage/NotFoundPage\";\nimport PoetsPage from \"./pages/PoetsPage/PoetsPage\";\nimport PoetProfile from \"./pages/PoetProfile/PoetProfile\";\nimport PoemPage from \"./pages/PoemPage/PoemPage\";\nimport SearchPage from \"./pages/SearchPage/SearchPage\";\nimport Footer from \"./components/Footer/Footer\";\nimport SignUpPage from \"./pages/SignUpPage/SignUpPage\";\nimport SignInPage from \"./pages/SignInPage/SignInPage\";\nimport DraftsPage from \"./pages/DraftsPage/DraftsPage\";\nimport FeelingLuckyPage from \"./pages/FeelingLuckyPage/FeelingLuckyPage\";\nimport RootWrapper from \"./components/RootWrapper/RootWrapper\";\nimport config from \"./config\";\n\n// Providers\nimport { SessionContextProvider, useSession } from \"./providers/SessionContext\";\nimport { StorageContextProvider } from \"./providers/StorageContext\";\nimport { BacklightContextProvider } from \"./providers/BacklightContext\";\n\nimport { LoaderContextProvider } from \"./providers/LoaderContext\";\nimport NewPoem from \"./pages/NewPoem/NewPoem\";\nimport { ToastContextProvider } from \"./providers/ToastContext\";\n\nfunction App() {\n  const { userSession } = useSession();\n\n  return (\n    <React.Fragment>\n      <ToastContextProvider>\n        <StorageContextProvider>\n          <SessionContextProvider>\n            <BacklightContextProvider>\n              <LoaderContextProvider>\n                <BrowserRouter>\n                  <RootWrapper>\n                    <Header />\n                    <Switch>\n                      <Route path=\"/new_poem\">\n                        <NewPoem userSession={userSession} />\n                      </Route>\n                      <Route exact path=\"/\">\n                        <Redirect to=\"/discover\"></Redirect>\n                      </Route>\n                      <Route path=\"/discover\">\n                        <HomePage />\n                      </Route>\n                      <Route exact path=\"/rebbels\">\n                        <PoetsPage />\n                      </Route>\n                      <Route path=\"/rebbels/@:poet\">\n                        <PoetProfile />\n                      </Route>\n                      <Route path=\"/your_drafts\">\n                        <DraftsPage />\n                      </Route>\n                      <Route path=\"/feeling_lucky\">\n                        <FeelingLuckyPage />\n                      </Route>\n                      <Route path=\"/~:poemId\">\n                        <PoemPage />\n                      </Route>\n                      <Route path=\"/search\">\n                        <SearchPage />\n                      </Route>\n                      <Route path=\"/sign_up\">\n                        <SignUpPage />\n                      </Route>\n                      <Route path=\"/sign_in\">\n                        <SignInPage></SignInPage>\n                      </Route>\n                      <Route path=\"*\">\n                        <NotFoundPage />\n                      </Route>\n                      <Route path=\"/not_found\">\n                        <NotFoundPage />\n                      </Route>\n                    </Switch>\n                    <Footer />\n                  </RootWrapper>\n                </BrowserRouter>\n              </LoaderContextProvider>\n            </BacklightContextProvider>\n          </SessionContextProvider>\n        </StorageContextProvider>\n      </ToastContextProvider>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FooterContainer\":\"Footer_FooterContainer__3om6w\",\"Footer\":\"Footer_Footer__37hEc\",\"BrandName\":\"Footer_BrandName__3Ln1q\",\"Legal\":\"Footer_Legal__1pCYr\",\"LeftSection\":\"Footer_LeftSection__cesUv\",\"SectionName\":\"Footer_SectionName__21QzB\",\"Attribution\":\"Footer_Attribution__12EnI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemPageHeader\":\"PoemPageHeader_PoemPageHeader__1YcZt\",\"BackgroundDiffuser\":\"PoemPageHeader_BackgroundDiffuser__1lEzy\",\"PoemInformationContainer\":\"PoemPageHeader_PoemInformationContainer__2l3Cz\",\"PoemThumbnailImage\":\"PoemPageHeader_PoemThumbnailImage__ne5WI\",\"PoemDetailsContainer\":\"PoemPageHeader_PoemDetailsContainer__10FpI\",\"PoemTitle\":\"PoemPageHeader_PoemTitle__29a6A\",\"PoemDescription\":\"PoemPageHeader_PoemDescription__1S9Wg\",\"PoemMetadataItems\":\"PoemPageHeader_PoemMetadataItems__1Vaym\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poem\":\"Poem_Poem__LY0gH\",\"PoemThumbnail\":\"Poem_PoemThumbnail__3QKkQ\",\"PoemReadTime\":\"Poem_PoemReadTime__1_-w2\",\"PoemTitle\":\"Poem_PoemTitle__12qQa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NewPoemHeaderContainer\":\"NewPoem_NewPoemHeaderContainer__t4L9L\",\"link\":\"NewPoem_link__1Bamm\",\"NewPoemImageSelector\":\"NewPoem_NewPoemImageSelector__2Gq2Z\",\"ImageUploadProgress\":\"NewPoem_ImageUploadProgress__1ClJC\",\"NewPoemDetails\":\"NewPoem_NewPoemDetails__Kwqin\",\"NewPoemTitle\":\"NewPoem_NewPoemTitle__pxTax\",\"NewPoemContentsContainer\":\"NewPoem_NewPoemContentsContainer__1ebla\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Comment\":\"Comment_Comment__3FepX\",\"CommentBody\":\"Comment_CommentBody__25PvU\",\"Like\":\"Comment_Like__3O-MK\",\"Flag\":\"Comment_Flag__3jENy\",\"CommentorNameDate\":\"Comment_CommentorNameDate__16FBL\",\"CommentActions\":\"Comment_CommentActions__331Ow\",\"CommentActionButtons\":\"Comment_CommentActionButtons__1ajaQ\",\"CommentMoreActions\":\"Comment_CommentMoreActions__1c0ex\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DraftPreview\":\"DraftPreview_DraftPreview__yNm0A\",\"DraftTitle\":\"DraftPreview_DraftTitle__3RCXC\",\"DraftSplitSides\":\"DraftPreview_DraftSplitSides__1j1y-\",\"DraftContents\":\"DraftPreview_DraftContents__1rRku\",\"DraftAnnotations\":\"DraftPreview_DraftAnnotations__1vh4N\",\"DraftAnnotationsText\":\"DraftPreview_DraftAnnotationsText__1OjU6\",\"BottomButtons\":\"DraftPreview_BottomButtons__19wR1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DropdownLinkItems\":\"AccountDropdownOptions_DropdownLinkItems__2GaYE\",\"DropdownItemsHeader\":\"AccountDropdownOptions_DropdownItemsHeader__FjO-k\",\"SignOut\":\"AccountDropdownOptions_SignOut__fv22i\",\"RebbelStatus\":\"AccountDropdownOptions_RebbelStatus__8MkN8\",\"RebbelName\":\"AccountDropdownOptions_RebbelName__3k-xl\",\"HeaderSectionName\":\"AccountDropdownOptions_HeaderSectionName__2pNMS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemInputContainer\":\"PoemPostInput_PoemInputContainer__1qw88\",\"PoemInputTitle\":\"PoemPostInput_PoemInputTitle__2oLmn\",\"PoemInput\":\"PoemPostInput_PoemInput__3YoN7\",\"PoemTagsInput\":\"PoemPostInput_PoemTagsInput__26EWh\",\"Buttons\":\"PoemPostInput_Buttons__3AFZM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"Header_flex__1xcfe\",\"space-between\":\"Header_space-between__u85w8\",\"flex-space\":\"Header_flex-space__ye-2W\",\"clickable\":\"Header_clickable__191kM\",\"Banner\":\"Header_Banner__1GWR_\",\"HeaderContainer\":\"Header_HeaderContainer__F-Ur3\",\"Header\":\"Header_Header__2C_Ub\",\"NavigationLinks\":\"Header_NavigationLinks__-AflA\",\"HeaderBrandLogo\":\"Header_HeaderBrandLogo__2PZZA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PageTitle\":\"SearchPage_PageTitle__3czwG\",\"SearchInputContainer\":\"SearchPage_SearchInputContainer__1ixej\",\"LargeSearchInput\":\"SearchPage_LargeSearchInput__2nEZh\",\"SearchButton\":\"SearchPage_SearchButton__3x0_t\",\"Rebbels\":\"SearchPage_Rebbels__2r-5-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__3w7V8\",\"FirstCircle\":\"Loader_FirstCircle__1fzNt\",\"FirstCircleBlink\":\"Loader_FirstCircleBlink__1qLd-\",\"SecondCircle\":\"Loader_SecondCircle__YfdMW\",\"SecondCircleBlink\":\"Loader_SecondCircleBlink__1a2nU\",\"BlendGroup\":\"Loader_BlendGroup__1AEZI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poet\":\"Poet_Poet__1iqH7\",\"PoetAvatar\":\"Poet_PoetAvatar__Qvcdq\",\"PoetName\":\"Poet_PoetName__1MMec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemShareContents\":\"PoemShareContents_PoemShareContents__20LFa\",\"ShareLinkInput\":\"PoemShareContents_ShareLinkInput__1sKku\",\"SocialMediaShare\":\"PoemShareContents_SocialMediaShare__7pT3x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toast\":\"Toast_Toast__1az6l\",\"CloseButton\":\"Toast_CloseButton__Gj3ID\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PreviewAvatar\":\"PreviewAvatar_PreviewAvatar__1v5vc\",\"PreviewDisplayName\":\"PreviewAvatar_PreviewDisplayName__1thK8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CommentsSection\":\"CommentsSection_CommentsSection__387ir\",\"PostCommentField\":\"CommentsSection_PostCommentField__3F0OP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemsGrid\":\"PoemsList_PoemsGrid__DvbAG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotFoundPage\":\"NotFoundPage_NotFoundPage__2pL1I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poets\":\"PoetsPage_Poets__39bvA\"};"],"sourceRoot":""}